<?xml version="1.0" encoding="UTF-8"?>

<!-- -*- nxml -*- -->
<transfer>

  <section-def-cats>

    <def-cat n="cnj">
	<cat-item tags="cnjcoo"/>
	<cat-item tags="cnjsub"/>
	<cat-item tags="cnjadv"/>
	<cat-item tags="rel.*"/>
    </def-cat>
    
    <def-cat n="coma">
	    <cat-item tags="cm"/> 
    </def-cat>
	
    <def-cat n="yá">
	    <cat-item tags="adv"/> 
    </def-cat>	
	
    <def-cat n="adv_itg">
	    <cat-item lemma="cómo" tags="adv"/> 
	    <cat-item lemma="cómo" tags="adv.itg"/> 
	    <cat-item lemma="cuándo" tags="adv"/> 
	    <cat-item lemma="cuándo" tags="adv.itg"/> 
	    <cat-item lemma="ónde" tags="adv"/> 
	    <cat-item lemma="ónde" tags="adv.itg"/> 	
	    <cat-item lemma="aú" tags="adv"/> 
	    <cat-item lemma="aú" tags="adv.itg"/> 
	    <cat-item lemma="ú" tags="adv"/> 
	    <cat-item lemma="ú" tags="adv.itg"/>
	    <cat-item lemma="qué" tags="prn.itg.mf.sg"/>
	    <cat-item lemma="qué" tags="adv"/> 	
	    <cat-item lemma="cuántu" tags="prn.itg.*"/>
	    <cat-item lemma="cuántu" tags="adj.itg"/> 				
    </def-cat>	    
	
    <def-cat n="saber">
	    <cat-item lemma="saber" tags="vblex.pri.*"/> 
	    <cat-item lemma="ser" tags="vbser.imp.p2.sg"/> 		
    </def-cat>	
	
    <def-cat n="proclise">
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="adv.itg"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="rel.*"/>
      <cat-item tags="adv"/>
      <cat-item tags="ij"/>
      <cat-item tags="cnjcoo"/>
      <cat-item tags="pr"/>
      <cat-item tags="cnjadv"/>
    </def-cat>
    
    <def-cat n="categorias">
	    <cat-item lemma="antes" tags="adv"/>
	    <cat-item lemma="ayeri" tags="adv"/>
	    <cat-item lemma="entós" tags="adv"/>
	    <cat-item lemma="daquella" tags="adv"/>
	    <cat-item lemma="cuantayá" tags="adv"/>
	    <cat-item lemma="abenayá" tags="adv"/>
	    <cat-item lemma="cuando" tags="cnjadv"/>
	    <cat-item lemma="cuándo" tags="adv.*"/>
    </def-cat>
    
    <def-cat n="categorias2">
	    <cat-item tags="prn.tn.*"/>
	    <cat-item tags="np.*"/>
    </def-cat>
    
	<def-cat n="categorias3">
	    <cat-item tags="prn.tn.*"/>
	    <cat-item tags="np.*"/>
	    <cat-item tags="n.*"/>
		<cat-item tags="adv"/>
    </def-cat>
	
    <def-cat n="nom">
      <cat-item tags="n.*"/>
    </def-cat>
	
    <def-cat n="en">
      <cat-item lemma="en" tags="pr"/>
	</def-cat>

	<def-cat n="a">
		<cat-item lemma="a" tags="pr"/>
	</def-cat>
	
    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
	</def-cat>

    <def-cat n="bueno_malo">
		<cat-item lemma="bono" tags="adv"/>
		<cat-item lemma="bonu" tags="adj.*"/>
		<cat-item lemma="malu" tags="n.*"/>
		<cat-item lemma="malu" tags="adj.*"/>
	</def-cat>
     	
	<def-cat n="sustantivo_temporal">
      <cat-item lemma="segundu" tags="n.*"/>	
      <cat-item lemma="minutu" tags="n.*"/>	  
      <cat-item lemma="hora" tags="n.*"/>	  
      <cat-item lemma="día" tags="n.*"/>
	  <cat-item lemma="selmana" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
	  <cat-item lemma="añu" tags="n.*"/>
      <cat-item lemma="década" tags="n.*"/>	
      <cat-item lemma="lustru" tags="n.*"/>		  
      <cat-item lemma="siglu" tags="n.*"/>	
      <cat-item lemma="tiempu" tags="n.*"/>		
      <cat-item lemma="ratu" tags="n.*"/>		
      <cat-item lemma="temporada" tags="n.*"/>			  
	</def-cat>
    <!-- sustantivos temporales -->
	
    <def-cat n="que">
      <cat-item tags="rel.nn.*"/>
    </def-cat>
   <!--relativo "que" -->
   
   <def-cat n="queconj">
	   <cat-item tags="cnjsub"/>
    </def-cat>
    
    <def-cat n="siconj">
	    <cat-item tags="cnjadv"/>
    </def-cat>
    
    <def-cat n="non">
	    <cat-item tags="adv"/>
    </def-cat>
	
    <def-cat n="ye">
	    <cat-item lemma="ser" tags="vbser.pii.p3.*"/>	
	    <cat-item lemma="ser" tags="vbser.pri.p3.*"/>
    </def-cat>
    
    <def-cat n="nun">
	   <cat-item lemma="nun" tags="adv"/>
	   <cat-item lemma="non" tags="adv"/>
   </def-cat>
    
   <def-cat n="y">
      <cat-item lemma="y" tags="cnjcoo"/>	
      <cat-item lemma="ya" tags="cnjcoo"/>	  
      <cat-item lemma="anque" tags="cnjadv"/>	
      <cat-item lemma="pero" tags="cnjcoo"/>	
      <cat-item lemma="pero" tags="n.*"/>	
      <cat-item lemma="nin" tags="cnjcoo"/>	
   </def-cat>	
   <!-- 'y' y derivados -->	
	
   <def-cat n="detnt">
      <cat-item tags="detnt"/>
   </def-cat>
   <!-- determinante neutro -->

	<def-cat n="adjnt">
      <cat-item tags="adj.nt.*"/>
    </def-cat>		
    <!-- adjetivo neutro -->
	
    <def-cat n="cualesquier">
	    <cat-item lemma="cualquiera" tags="prn.*"/>
	    <cat-item lemma="cualesquier" tags="prn.*"/>
	    <cat-item lemma="cualesquier" tags="det.*"/>
	    <cat-item lemma="cualquier" tags="det.*"/>
    </def-cat>
    
    <def-cat n="tener">
	    <cat-item lemma="tener" tags="vblex.*"/>
    </def-cat>
    <!--verbo deber -->
    
    <def-cat n="venir">
	    <cat-item lemma="venir" tags="vblex.*"/>
    </def-cat>
	
    <def-cat n="entamar">
	    <cat-item lemma="entamar" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="dir">
	    <cat-item lemma="dir" tags="vblex.pri.*"/>
    </def-cat>
    
	<def-cat n="adj_det_num_nom">
      <cat-item tags="adj.*"/>
      <cat-item tags="det.*"/>
	  <cat-item tags="num.*"/>
     <cat-item tags="n.*"/>
    </def-cat>	
     
	<def-cat n="adj_nom">
      <cat-item tags="adj.*"/>
     <cat-item tags="n.*"/>
    </def-cat>		 

     <def-cat n="nommas">
	<cat-item tags="n.m.sg"/>
    </def-cat>
    
    <def-cat n="nomp">
      <cat-item tags="np.ant"/>
    </def-cat>
    <def-cat n="nploc">
      <cat-item tags="np.loc"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det"/>
      <cat-item tags="det.def"/>
      <cat-item tags="det.ind"/>
      <cat-item tags="det.dem"/>	  	  
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.dem.*"/>	  
    </def-cat>
    <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
    <def-cat n="pos">
      <cat-item tags="det.pos.*"/>
      <cat-item tags="adj.pos.*"/>	  
      <cat-item lemma="so" tags="ij"/>	 	  
      <cat-item lemma="tos" tags="n.*"/>	 	  
    </def-cat>
	<def-cat n="posmf">
      <cat-item tags="det.pos.mf.*"/>
    </def-cat>
    <def-cat n="predet">
      <cat-item tags="predet.*"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj.*"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
   <def-cat n="prep_tou">
      <cat-item tags="pr"/>
      <cat-item lemma="tou" tags="predet.*"/>
    </def-cat>
    <def-cat n="cuyo">
      <cat-item tags="rel.aa.*"/>
    </def-cat>
    <def-cat n="prn">
      <cat-item tags="prn.tn.*"/>
      <cat-item tags="prn.itg.*"/>
    </def-cat>
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    <def-cat n="encpro">
	    <cat-item tags="prn.pro.*"/>
	    <cat-item tags="prn.pro.ref*"/>
	    <cat-item tags="prn.enc.*"/>
    </def-cat>
	    
    <def-cat n="plus">
	    <cat-item tags="vblex.pis.*"/>
	    <cat-item tags="vbser.pis.*"/>
	    <cat-item tags="vbhaver.pis.*"/>
    </def-cat>
    
    <def-cat n="cond">
	    <cat-item tags="vblex.cni.*"/>
	    <cat-item tags="vbser.cni.*"/>
	    <cat-item tags="vbhaver.cni.*"/>
    </def-cat>
    
    <def-cat n="imp_cond_plus">
	    <cat-item tags="vblex.pis.*"/>
	    <cat-item tags="vbser.pis.*"/>
	    <cat-item tags="vbhaver.pis.*"/>
	    <cat-item tags="vblex.pii.*"/>
	    <cat-item tags="vbser.pii.*"/>
	    <cat-item tags="vbhaver.pii.*"/>
	    <cat-item tags="vblex.cni.*"/>
	    <cat-item tags="vbser.cni.*"/>
	    <cat-item tags="vbhaver.cni.*"/>
    </def-cat>
    
    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
    </def-cat>
    <def-cat n="verbir">
      <cat-item lemma="dir" tags="vblex.*"/>
      <cat-item lemma="volver" tags="vblex.*"/>
      <cat-item lemma="acostumar" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="verb_temp">
	    <cat-item lemma="dir" tags="vblex.pri.p3.sg"/>
	    <cat-item lemma="hai" tags="vblex.pri.p3.sg"/>
	    <cat-item lemma="haber" tags="vbhaver.pri.p3.sg"/>
    </def-cat>
    <def-cat n="verbter">
      <cat-item lemma="tar" tags="vblex.*"/>
    </def-cat>
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

 <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
    </def-cat>
    <def-cat n="ppmsg">
      <cat-item tags="vblex.pp.m.sg"/>
      <cat-item tags="vbser.pp.m.sg"/>
      <cat-item tags="vbhaver.pp.m.sg"/>
    </def-cat>
    <def-cat n="pmp">
      <cat-item tags="vblex.pmp.*"/>
      <cat-item tags="vbser.pmp.*"/>
      <cat-item tags="vbhaver.pmp.*"/>
    </def-cat>
    <def-cat n="lquest">
      <cat-item tags="lquest"/>
    </def-cat>
    <def-cat n="num">
      <cat-item tags="num.*"/>
    </def-cat>
     <def-cat n="sent">
       <cat-item tags="sent"/>
     </def-cat>
  </section-def-cats>
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
    </def-attr>
    
   
    <def-attr n="a_nomp">
      <attr-item tags="np.ant"/>
    </def-attr>
    <def-attr n="a_nploc">
      <attr-item tags="np.loc"/>
    </def-attr>
    <def-attr n="a_det">
      <attr-item tags="det.def"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
    </def-attr>
    <def-attr n="a_predet">
      <attr-item tags="predet"/>
    </def-attr>
    <def-attr n="a_adjec">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
      <attr-item tags="vblex.pp"/>
    </def-attr>
    <def-attr n="a_adj">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
    </def-attr>
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
    </def-attr>
    <def-attr n="a_prep">
      <attr-item tags="pr"/>
    </def-attr>
    <def-attr n="a_prn">
      <attr-item tags="prn.tn.p1"/>
      <attr-item tags="prn.tn.p2"/>
      <attr-item tags="prn.tn.p3"/>
      <attr-item tags="prn.tn"/>
      <attr-item tags="prn.tn.ref.p3"/>
      <attr-item tags="prn.tn.pos"/>
      <attr-item tags="prn.itg"/>
    </def-attr>
    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
    </def-attr>
    <def-attr n="a_inf">
      <attr-item tags="vblex.inf"/>
      <attr-item tags="vbser.inf"/>
      <attr-item tags="vbhaver.inf"/>
    </def-attr>
    <def-attr n="a_lquest">
      <attr-item tags="lquest"/>
    </def-attr>
    <def-attr n="a_num">
      <attr-item tags="num"/>
    </def-attr>
    <def-attr n="a_prnenc">
      <attr-item tags="prn.enc"/>
      <attr-item tags="prn.enc.ref"/>
    </def-attr>
    <def-attr n="a_prnpro">
      <attr-item tags="prn.pro"/>
      <attr-item tags="prn.pro.ref"/>
    </def-attr>
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="persona">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
    <def-attr n="temps">
      <attr-item tags="inf"/>
      <attr-item tags="ger"/>
      <attr-item tags="pp"/>
      <attr-item tags="pri"/>
      <attr-item tags="ifi"/>
      <attr-item tags="pii"/>
      <attr-item tags="fti"/>
      <attr-item tags="cni"/>
      <attr-item tags="prs"/>
      <attr-item tags="pis"/>
      <attr-item tags="fts"/>
      <attr-item tags="imp"/>
      <attr-item tags="pmp"/>
    </def-attr>

    
  </section-def-attrs>
  <section-def-vars>
    <def-var n="uno"/>
    <def-var n="genero"/>
    <def-var n="numero"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
  </section-def-vars>
  <section-def-macros>
  
 <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format -->
     	<choose>
     	  <when>
     	    <test>
     	      <not>
     	        <equal>
     	          <b pos="1"/>
     	          <lit v=" "/>
     	        </equal>
              </not>
     	    </test>
            <out>
              <b pos="1"/>
            </out>
          </when>     	    
     	</choose>
     </def-macro>

    
    <def-macro n="f_concord1" npar="1">
      <choose>
<!--To determine value of variables of gender and
                 number and propagate to other rules.  Variables are
                 not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- If word has GD or ND, we try to assign the
              gender or number of the previous rule. If there is no
              value for the gender or number variable from previous
              rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>


    <def-macro n="f_concord2" npar="2">

	<choose>
        <when>
          <test>
            <!-- do the main and second parameter gender agree?-->
            <and>
              <or>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal caseless="yes">
                  <!-- do the main and second parameter number agree?-->
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
          <!-- there is gender and number agreement-->
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
          <!-- there isn't gender and number agreement-->
        </otherwise>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Propagate the main parameter gender if it has been modified during the translation -->
            <and>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal caseless="yes">
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal caseless="yes">
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal caseless="yes">
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal caseless="yes">
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Propagate the main parameter number if it has been modified during the translation -->
            <and>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal caseless="yes">
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal caseless="yes">
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal caseless="yes">
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal caseless="yes">
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
            </when>
          </choose>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Which is the rule general gender? -->
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="nt"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="nt"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="nt"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="nt"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>

      <choose>
        <when>
          <!-- Which is the rule general number? -->
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>

      <choose>
        <!-- Determine gender and number value if they are undetermined -->
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>

    </def-macro>



    <def-macro n="f_concord3" npar="3">
      <choose>
<!-- Look if in source language there is concordance between first and second element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Look if in source language there is concordance between second and third element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Propagate the main parameter gender if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Propagate the main parameter number if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Determine the rule general gender. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="3" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine the rule general number. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="3" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Assign values to GD and ND -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord4" npar="4">
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concTercero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concTercero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
  </section-def-macros>
  <section-rules>
    
    
    <rule>
<!-- REGLA 0: DETERMINANT -->
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 1: NOM -->
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_nom"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 2: ADJECTIU -->
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_adj"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 3: PRONOM -->
<!--Special case, macro f_concord1 
is not applicable because gender and number cannot be taken from previous rules -->
      <pattern>
        <pattern-item n="prn"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="GD"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </let>
          </when>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_prn"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 4: NUMERAL-->
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
	
    <rule>
		<!-- REGLA 4b: DET_POS NOM -->
      <pattern>
        <pattern-item n="posmf"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
    <!-- 
	 regla EGV19 cualesquier + nombre masculino -> cualequier + nombre
    
    pa cualesquier sistema -> para cualquier sistema .
    
    -->  
    <rule>
	    <pattern>
		    <pattern-item n="cualesquier"/>
		    <pattern-item n="nommas"/>
		    
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="cualquier"/>
				    </get-case-from>
				    <lit-tag v="det.ind.mf.sg"/>
				    
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/> 
				    
			    </lu>
			    
		    </out>
	    </action>
    </rule>
    
    
    <!-- 
	 regla EGV20 cualesquier + nombre masculino + adj -> cualequier + nombre + adj
    pa cualesquier sistema operativu -> para cualquier sistema operativo
    
    -->  
    <rule>
	    <pattern>
		    <pattern-item n="cualesquier"/>
		    <pattern-item n="nommas"/>
		    <pattern-item n="adj"/>
		    
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="cualquier"/>
				    </get-case-from>
				    <lit-tag v="det.ind.mf.sg"/>
				    
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/> 
				    
			    </lu>
			    <b/>
			    
			    <lu>
				    <clip pos="3" side="tl" part="whole"/> 
			    </lu>
		    </out>
	    </action>
    </rule>
    <rule>
	   
<!-- REGLA 5: DETERMINANT NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
	      <choose>	  
		      <when>
			      <test>
				      <equal>
					      <clip pos="2" side="sl" part="gen"/>
					      <lit-tag v="mf"/>
				      </equal>
			      </test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_det"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
			      <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			  </when>	  			  
			  <otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_det"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
			      <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>			  
			  </otherwise>
		  </choose>
      </action>
    </rule>
    <rule>

	
<!-- REGLA 5b: POSESIVO NOM -->
      <pattern>
        <pattern-item n="pos"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
	      <choose>
		      <when>
			      <test>

					  <or>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l mio"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l to"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l so"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l vuesu"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l nuesu"/>
				      </equal>					  
					  </or>
				
			      </test>
				<out>
				  <b/>				
				  <lu>
					<clip pos="1" side="tl" part="whole"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="2" side="tl" part="whole"/>
					<!-- <clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/> -->
				  </lu>
				</out>
			  </when>		  
		      <when>
			      <test>
				      <equal>
					      <clip pos="2" side="sl" part="gen"/>
					      <lit-tag v="mf"/>
				      </equal>
			      </test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_det"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			  </when>

			  <otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_det"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>			  
			  </otherwise>
		  </choose>
      </action>
    </rule>
    <rule>	
	
	
	
<!-- REGLA 5c: POSESIVO ADJ NOM -->
      <pattern>
        <pattern-item n="pos"/>
        <pattern-item n="adj"/>		
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>		  
          <with-param pos="1"/>
        </call-macro>
	      <choose>
		      <when>
			      <test>
					<and>
					  <or>
						  <equal>
							  <clip pos="3" side="sl" part="gen"/>
							  <lit-tag v="mf"/>
						  </equal>
						  <equal>
							  <clip pos="2" side="sl" part="gen"/>
							  <lit-tag v="mf"/>
						  </equal>
					  </or>
					  <or>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l mio"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l to"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l so"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l vuesu"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l nuesu"/>
				      </equal>					  
					  </or>
					</and>
			      </test>
				<out>
				  <b/>				
				  <lu>
					<clip pos="1" side="tl" part="whole"/>
				  </lu>				
				  <b/>				
				  <lu>
					<clip pos="2" side="tl" part="whole"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				</out>
			  </when>		  
		      <when>
			      <test>
					  <or>
						  <equal>
							  <clip pos="3" side="sl" part="gen"/>
							  <lit-tag v="mf"/>
						  </equal>
						  <equal>
							  <clip pos="2" side="sl" part="gen"/>
							  <lit-tag v="mf"/>
						  </equal>
					  </or>
			      </test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="whole"/>
				  </lu>
			      <b/>				
				  <lu>
					<clip pos="2" side="tl" part="whole"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				</out>
			  </when>
		     <when>
			      <test>
				  <or>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l mio"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l to"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l so"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l vuesu"/>
				      </equal>
					  <equal>
					      <clip pos="1" side="sl" part="lem"/>
					      <lit v="'l nuesu"/>
				      </equal>					  
					  </or>
					
			      </test>
				<out>
				  <b/>				
				  <lu>
					<clip pos="1" side="tl" part="whole"/>
				  </lu>				
				  <b/>				
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				</out>
			  </when> 
			  <otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_det"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>		
				  <b/>
				  <lu>
					<clip pos="2" side="tl" part="whole"/>
				  </lu>
			      <b/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				</out>			  
			  </otherwise>
		  </choose>
      </action>
    </rule>
    <rule>		
	
	
	
<!-- REGLA 6: NOM ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
		  <choose>
			  <when>
				<test>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>				
			</when>
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			</otherwise>
		</choose>
      </action>
    </rule>
	
	
	<rule>
<!-- REGLA 7: NOM ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="y"/>
        <pattern-item n="adjec"/>		
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>		  
        </call-macro>
		<choose>
			<when>
				<test>
				<and>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				  <equal>
					<clip pos="4" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>				  
				</and>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>				
			</when>		
			  <when>
				<test>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>				
			</when>
			  <when>
				<test>
				  <equal>
					<clip pos="4" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>					  			
			</when>			
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>		
			</otherwise>
		</choose>
      </action>
    </rule>	
	
    <rule>
<!-- REGLA 8: ADJECTIU NOM -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
		<choose>
			  <when>
				<test>
				  <equal>
					<clip pos="1" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_adj"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>				
			</when>
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			</otherwise>
		</choose>
      </action>
    </rule>
	
   

    <rule>
<!-- REGLA 9: DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
	      <call-macro n="f_concord3">
		      <with-param pos="2"/>
		      <with-param pos="1"/>
		      <with-param pos="3"/>
        </call-macro>
	      <choose>
		      <when>
			      <test>
				      <or>
				   
				      <equal>
					      <clip pos="3" side="sl" part="gen"/>
					      <lit-tag v="mf"/>
				      </equal>
			 
				      <equal>
					      <clip pos="2" side="sl" part="gen"/>
					      <lit-tag v="mf"/>
				      </equal>
			     
		           </or>
			      </test>
			  <out>
			      <lu>
				      <clip pos="1" side="tl" part="lem"/>
				      <clip pos="1" side="tl" part="a_det"/>
				      <clip pos="1" side="tl" part="gen"/>
				      <clip pos="1" side="tl" part="nbr"/>
			      </lu>
			      <b/>
			      <lu>
				      <clip pos="2" side="tl" part="lem"/>
				      <clip pos="2" side="tl" part="a_nom"/>
				      <clip pos="2" side="tl" part="gen"/>
				      <clip pos="2" side="tl" part="nbr"/>
			      </lu>
			      <b/>
			      <lu>
				      <clip pos="3" side="tl" part="lem"/>
				      <clip pos="3" side="tl" part="a_adjec"/>
				      <clip pos="3" side="tl" part="gen"/>
				      <clip pos="3" side="tl" part="nbr"/>
          		</lu>
		</out>
	</when>
	
	<otherwise>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
	  <b/> 
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
     </otherwise>
    </choose>
      </action>
    </rule>
    <rule>
<!-- REGLA 10: DET ADJECTIU NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 11: PREDET DET NOM-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_predet"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 12: PREDET DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_predet"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 13: DETERMINANT ADJECTIU-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 14: ADJECTIU NOM ADJECTIU-->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_adj"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 15: DET ADJECTIU NOM ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 16: NOM ADVERBI ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_nom"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 17: DET NOM ADVERBI ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adv"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 18: DET ADVERBI NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 19: NUMERAL NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 20: NUMERAL ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 21: NUMERAL NOM ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 22: NUMERAL ADJECTIU NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 23: DET NUMERAL NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_num"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
    
  
    <rule>  
 

<!--REGRA EGV01: V (verbos sen enclíticos)
canté pola nueche-> he cantado por la noche (si es pasado pongo el compuesto)
comería pola nueche -> comería por la noche
cantara unes canciones guapes -> había cantado unas canciones bonitas
Nun canté pola nueche -> No he cantado por la noche

-->
      <pattern>
        <pattern-item n="verb"/>
      </pattern>
      <action>
        <choose>
          
          
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="pis"/>
              </equal>
            </test>
            <out>
              <lu>
		<get-case-from pos="1">
                <lit v="haber"/>
		</get-case-from> 
                <lit-tag v="vbhaver.pii"/>
                <clip pos="1" side="sl" part="persona"/>
                <clip pos="1" side="sl" part="nbr"/>
              </lu>
	      <b/>
              <lu>
	        <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="sl" part="a_verb"/>
                <lit-tag v="pp"/>
                <lit-tag v="m"/>
                <lit-tag v="sg"/>
              </lu>
            </out>
          </when>         
	  
	  <when>
		  <test>
			  <equal>
				  <clip pos="1" side="sl" part="temps"/>
				  <lit-tag v="ifi"/>
			  </equal>
		  </test>
		  <out>
			  <lu>
				  
				  <get-case-from pos="1">		  
				  <lit v="haber"/>
			  	  </get-case-from> 
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>		
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
			  </lu>
		  </out>
          </when>         
          <otherwise>
            
    	    <out>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="persona"/>
		<clip pos="1" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </out>  
          </otherwise>

        </choose>     

      </action>
    </rule>
   
    
    <!--REGRA EGV02: V (verbos sen enclíticos)
	
    que cantara bien -> Que cantara bien 

    Si cantara bien, pagáben-y más -> Si cantara bien, le pagaban más
    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		  
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <clip pos="2" side="tl" part="temps"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </out>  
	    </action>
    </rule>
    
	
    <!--REGRA EGV03: V (verbos sen enclíticos)
    diz que cantara bien -> dice que había cantado bien
    pregunta si cantara bien -> pregunta si había cantado bien
    Nun diz que cantara bien -> No dice que había cantado bien
    -->
  
    <rule>  
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    <equal>
						    <clip pos="1" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
				    	   </and>
				    </test>
				    <out>
					    <lu>
						    
						    <get-case-from pos="1">		  
							    <lit v="haber"/>
						    </get-case-from> 
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lemh"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <clip pos="3" side="tl" part="temps"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <clip pos="3" side="tl" part="lemq"/>
					    </lu>
				    </out>  
			    </otherwise>
			    
		    </choose>     
		    
	    </action>
    </rule>

    
    <!--REGRA EGV04: V (verbos sen enclíticos)
    Preguntó si la neña cantara bien->  Ha preguntado si la niña había cantado bien
    Nun preguntó si la neña cantara bien ->  No ha preguntado si la niña había cantado bien
    Preguntaríes si la neña cantara bien -> Preguntarías si la niña había cantado bien
    Nun preguntaríes si la neña cantara bien -> No preguntarías si la niña había cantado bien
    -->
    <rule>
    <pattern>
	    <pattern-item n="verb"/>
	    <pattern-item n="cnj"/>
	    <pattern-item n="adj_det_num_nom"/>
	    <pattern-item n="adj_det_num_nom"/>
	    <pattern-item n="plus"/>
    </pattern>
    <action>
	    <choose>
		    
		    <when>
			    <test>
				    <equal>
					    <clip pos="1" side="sl" part="temps"/>
					    <lit-tag v="ifi"/>
				    </equal>
			    </test>
			    <out>
				    <lu>
					    
					    <get-case-from pos="1">		  
						    <lit v="haber"/>
					    </get-case-from> 
					    <lit-tag v="vbhaver.pri"/>
					    <clip pos="1" side="sl" part="persona"/>
					    <clip pos="1" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu> <get-case-from pos="2">	
					    <clip pos="1" side="tl" part="lem"/>
				    </get-case-from> 
					    <clip pos="1" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    
				    <lu>
				    <clip pos="3" side="tl" part="whole"/>
			    	    </lu>
				    <b/>
				    <lu>
					    <clip pos="4" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="haber"/>
					    <lit-tag v="vbhaver.pii"/>
					    <clip pos="5" side="sl" part="persona"/>
					    <clip pos="5" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="5" side="tl" part="lem"/>
					    <clip pos="5" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
			    </out>
		    </when>         
		    <otherwise>
			    
			    <out>
				    <lu>
					    <clip pos="1" side="tl" part="lemh"/>
					    <clip pos="1" side="tl" part="a_verb"/>
					    <clip pos="1" side="tl" part="temps"/>
					    <clip pos="1" side="tl" part="persona"/>
					    <clip pos="1" side="tl" part="gen"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="1" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				   
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
				    <b/>
				    
				    <lu>
					    <clip pos="4" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="haber"/>
					    <lit-tag v="vbhaver.pii"/>
					    <clip pos="5" side="sl" part="persona"/>
					    <clip pos="5" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="5" side="tl" part="lem"/>
					    <clip pos="5" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
			    </out>  
		    </otherwise>
		    
	    </choose>     
	    
    </action>
</rule>
   
    
    <!--REGRA EGV05: V (verbos sen enclíticos)
	      Si la neña cantara bien-> Si la niña cantara @bien

    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		   
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>  
	
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV06: V (verbos sen enclíticos)
    Preguntó si María cantara bien->    Ha preguntado si María había cantado bien
    Nun preguntó si María cantara bien->  No ha preguntado si María había cantado bien
    Preguntaríes si María cantara bien ->  Preguntarías si María había cantado bien
    
    
    -->
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    
						    <get-case-from pos="1">		  
							    <lit v="haber"/>
						    </get-case-from> 
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu> <get-case-from pos="2">	
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from> 
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>         
			    <otherwise>
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="lemh"/>
						    <clip pos="1" side="tl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="gen"/>
						    <clip pos="1" side="tl" part="nbr"/>
						    <clip pos="1" side="tl" part="lemq"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
			    
		    </choose>     
		    
	    </action>
    </rule>
    
    <!--REGRA EGV07: V (verbos sen enclíticos)
	      Preguntó si María nun cantara->       Ha preguntado si María no había cantado
    Nun preguntó si María nun cantara->  No ha preguntado si María no había cantado
    Preguntaríes si María nun cantara ->      Preguntarías si María no había cantado
    
    
    -->
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    
						    <get-case-from pos="1">		  
							    <lit v="haber"/>
						    </get-case-from> 
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu> <get-case-from pos="2">	
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from> 
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>         
			    <otherwise>
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="lemh"/>
						    <clip pos="1" side="tl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="gen"/>
						    <clip pos="1" side="tl" part="nbr"/>
						    <clip pos="1" side="tl" part="lemq"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
			    
		    </choose>     
		    
	    </action>
    </rule>
    
    
    <!--REGRA EGV08: V (verbos sen enclíticos)
    si María cantara bien->  si María cantara bien
    Que María cantara bien, ye posible -> Que María cantara bien, es posible
    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    
		    
		    <out>
			    <lu>
				    <clip pos="1" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="3" side="tl" part="whole"/>
			    </lu>
		    </out>  
		    
	    </action>
    </rule>
    
    <!--REGRA EGV09: V (verbos sen enclíticos)
	      si María nun cantara bien->   si María no cantara bien
    Que María nun cantara bien, ye posible ->    Que María no cantara bien, es posible
    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    
		    
		    <out>
			    <lu>
				    <clip pos="1" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="3" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="4" side="tl" part="whole"/>
			    </lu>
		    </out>  
		    
	    </action>
    </rule>
    
    
    <!--REGRA EGV10: V (verbos sen enclíticos)
    Antes dixi esto -> Antes dije esto
    Ayeri canté la Traviata -> Ayer canté la Traviata
    Cuando canté, tiráronme agua enriba -> Cuando canté, me han tirado agua 
    ¿cuándo cantó María? ->¿cuándo cantó María?
    y dixi esto -> y he dicho esto(el y no entra en "categorias" se hace como el verbo solo)
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="verb"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="2" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="2" side="sl" part="persona"/>
						    <clip pos="2" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="lem"/>
						    <clip pos="2" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      

				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="gen"/>
							<clip pos="2" side="tl" part="nbr"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	
	<!--REGRA EGV11: V (verbos sen enclíticos)
        Antes  nun dixi esto ->  Antes no dije esto
	Ayeri nun canté la Traviata -> Ayer no canté la Traviata
	Cuando nun canté, tiráronme agua enriba -> Cuando no canté, me han tirado agua encima
	y nun dixi esto -> y no he dicho esto (y no entra en "categorias" se hace como el verbo solo)
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="nun"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="3" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<clip pos="3" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>


	
	<!--REGRA EGV12: (conj,adv,etc) + verbo + enc
	y comí-yos -> y les he comido
	Ayeri comiólu-> Ayeri lo comió
	Antes comióse -> Antes se comió
	y comíase -> y se comía
	Antes cómilo -> Antes cómelo 
	-->
	
	<rule>
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<equal>
								<clip pos="3" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
					    </lu>
					  
					</out>
				</when>
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="3" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
						<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
		
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="gen"/>
								<lit-tag v="m"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="nbr"/>
								<lit-tag v="sg"/>
						    </equal>
							
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
					    </lu>
						
					</out>
				</when>
				
				<when>
					<test>
						<and>
							
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="gen"/>
								<lit-tag v="m"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="nbr"/>
								<lit-tag v="sg"/>
						    </equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="gen"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
              			               </lu>
						
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						
						
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="gen"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						
						<lu>
							<clip pos="2" side="tl" part="whole"/>
							
              			               </lu>
						
						
					</out>
				</when>
				
				
				<when>
					<test>
						
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
							</equal>
							
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<mlu>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.enc"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						</mlu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
						
						
					</out>
				</when>
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<mlu>
							
							<lu>
								<clip pos="2" side="tl" part="lemh"/>
								<clip pos="2" side="sl" part="a_verb"/>
								<clip pos="2" side="tl" part="temps"/>
								<clip pos="2" side="tl" part="persona"/>
								<clip pos="2" side="tl" part="nbr"/>
							</lu>
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<clip pos="3" side="tl" part="a_prnenc"/>
								<clip pos="3" side="tl" part="persona"/>
								<clip pos="3" side="tl" part="gen"/>
								<clip pos="3" side="tl" part="nbr"/>
								<clip pos="2" side="tl" part="lemq"/>
							</lu>
						</mlu>
					</out>  
				</otherwise>
			</choose>     
		</action>
	</rule>

	
	<!--REGRA EGV13: V (verbos sen enclíticos)
	Ayeri yo canté-> Ayer yo canté
	y María cantó -> y María ha cantado
	Mañana el cantará -> Mañana el cantará 
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="categorias2"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="3" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<clip pos="3" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	

	
	<!--REGRA EGV14: V (verbos sen enclíticos)
	Ayeri yo nun canté-> Ayer yo no canté
	y María nun cantó -> y María no ha cantado
	Mañana el nun cantará -> Mañana el no cantará
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="categorias2"/>
			<pattern-item n="nun"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="4" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="4" side="sl" part="persona"/>
							<clip pos="4" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<clip pos="4" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="persona"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	

	
	<!--REGRA EGV15: (conj,adv,etc) + verbo + enc
	y yo comí-yos -> y yo les he comido 
	Ayeri María comiólu-> Ayeri María le comió
	Antes Juan mordióse -> Antes Juan se mordió
	Antes tu cómilo -> Antes tu cómelo
	-->
	
	<rule>
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="categorias2"/>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<and>
							<equal>
								<clip pos="3" side="sl" part="temps"/>
								<lit-tag v="pis"/>
							</equal>
							<equal>
								<clip pos="4" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="4" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="4" side="tl" part="persona"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<lit v="haber"/>
							</get-case-from>
							
							<lit-tag v="vbhaver.pii"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<clip pos="3" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						<b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						<b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="3">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="3" side="sl" part="persona"/>
								    <clip pos="3" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="3">
									    <clip pos="4" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="gen"/>
								    <clip pos="4" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="3" side="tl" part="lemh"/>
								    <clip pos="3" side="sl" part="a_verb"/>
								    <clip pos="3" side="tl" part="temps"/>
								    <clip pos="3" side="tl" part="persona"/>
								    <clip pos="3" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="4" side="tl" part="lem"/>
								    <clip pos="4" side="tl" part="a_prnenc"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="gen"/>
								    <clip pos="4" side="tl" part="nbr"/>
								    <clip pos="3" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	    
	

	    
	    
	    <!--REGRA EGV16: 
	    y el neñu comió-yos -> y el niño les ha comido
	    Antes María comiólu->  Antes María le comió
	    Antes el perru mordióse -> Antes el perru se mordió
	    Antes un neñu comíalo -> Antes un neñu lo comía
	    -->
	    
	    <rule>
		    <pattern>
			    <pattern-item n="categorias"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="verb"/>
			    <pattern-item n="prnenc"/>
		    </pattern>
		    <action>
			    <choose>
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="4">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="4" side="sl" part="persona"/>
								    <clip pos="4" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="4">
									    <clip pos="5" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="gen"/>
								    <clip pos="5" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="4" side="tl" part="lemh"/>
								    <clip pos="4" side="sl" part="a_verb"/>
								    <clip pos="4" side="tl" part="temps"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="5" side="tl" part="lem"/>
								    <clip pos="5" side="tl" part="a_prnenc"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="gen"/>
								    <clip pos="5" side="tl" part="nbr"/>
								    <clip pos="4" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	
	    
	    
	    <!--REGRA EGV17 
	    Ayeri el neñu tontu comió-yos -> Ayer el neñu tontu les comió
	    Antes el perru grande mordióse -> Antes el perru grande se mordió
	    y el perru grande mordióse -> y el perro grande se ha mordido
	    Antes un neñu grande comíalo -> Antes un neñu grande lo comía
	    -->
	    
	    <rule>
		    <pattern>
			    <pattern-item n="categorias"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="verb"/>
			    <pattern-item n="prnenc"/>
		    </pattern>
		    <action>
			    <choose>
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						   
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="5">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="5" side="sl" part="persona"/>
								    <clip pos="5" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="5">
									    <clip pos="6" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="6" side="tl" part="persona"/>
								    <clip pos="6" side="tl" part="gen"/>
								    <clip pos="6" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="5" side="tl" part="lemh"/>
								    <clip pos="5" side="sl" part="a_verb"/>
								    <clip pos="5" side="tl" part="temps"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="6" side="tl" part="lem"/>
								    <clip pos="6" side="tl" part="a_prnenc"/>
								    <clip pos="6" side="tl" part="persona"/>
								    <clip pos="6" side="tl" part="gen"/>
								    <clip pos="6" side="tl" part="nbr"/>
								    <clip pos="5" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	
	<!--REGRA EGV18: V (verbos sen enclíticos)
	Cuando la mio prima cantó-> Cuando mi prima cantó
	Cuando’l sacerdote cantó -> Cuando el sacerdote cantó
	Y el sacerdote cantó -> Y el sacerdote ha cantado
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="4" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="4" side="sl" part="persona"/>
							<clip pos="4" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<clip pos="4" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="persona"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	
	<!--REGRA EGV19: V (verbos sen enclíticos)
	Cuando la mio prima nun cantó-> Cuando mi prima no cantó
	Cuando’l sacerdote nun cantó -> Cuando el sacerdote no cantó
	Y el sacerdote nun cantó -> Y el sacerdote no ha cantado 
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="nun"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="5" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="5" side="sl" part="persona"/>
							<clip pos="5" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<clip pos="5" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lemh"/>
							<clip pos="5" side="tl" part="a_verb"/>
							<clip pos="5" side="tl" part="temps"/>
							<clip pos="5" side="tl" part="persona"/>
							<clip pos="5" side="tl" part="gen"/>
							<clip pos="5" side="tl" part="nbr"/>
							<clip pos="5" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	
	

	<!--REGRA EGV01c: V (verbos sen enclíticos)
	Cuando’l sacerdote tontu cantó> Cuando el sacerdote tonto cantó
	y el sacerdote tontu cantó -> 	y el sacerdote tonto ha cantado
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="5" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="5" side="sl" part="persona"/>
							<clip pos="5" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<clip pos="5" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lemh"/>
							<clip pos="5" side="tl" part="a_verb"/>
							<clip pos="5" side="tl" part="temps"/>
							<clip pos="5" side="tl" part="persona"/>
							<clip pos="5" side="tl" part="gen"/>
							<clip pos="5" side="tl" part="nbr"/>
							<clip pos="5" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	
	
	<!--REGRA EGV01c2: V (verbos sen enclíticos)
	Cuando’l sacerdote tontu nun cantó -> Cuando el sacerdote tonto no cantó 
	y el sacerdote tontu nun cantó ->  y el sacerdote tonto no ha cantado
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="nun"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="6" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="6" side="sl" part="persona"/>
							<clip pos="6" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="6" side="tl" part="lem"/>
							<clip pos="6" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="6" side="tl" part="lemh"/>
							<clip pos="6" side="tl" part="a_verb"/>
							<clip pos="6" side="tl" part="temps"/>
							<clip pos="6" side="tl" part="persona"/>
							<clip pos="6" side="tl" part="gen"/>
							<clip pos="6" side="tl" part="nbr"/>
							<clip pos="6" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
    
    
<!--REGRA EGV02: V+ENC 
cómi-yos->cómeles
comí-yos->les he comido
comiólu-> lo ha comido
cómese->se come
comióse -> se ha comido
cómilo -> cómelo
comelo -> comerlo
comentándo-yos -> comentándoles
-->

  <rule>
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
         <choose>
		 
		 
		 <when>
			 <test>
				 <and>
					 <equal>
						 <clip pos="2" side="sl" part="a_prnenc"/>
						 <lit-tag v="prn.enc.ref"/>
					 </equal>
					 <equal>
						<clip pos="1" side="sl" part="temps"/>
						<lit-tag v="ifi"/>
					 </equal>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="inf"/>
						 </equal></not>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="ger"/>
						 </equal></not>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="imp"/>
						 </equal></not>
				 </and>
			 </test>
			 <out>
				 <lu>
					 <get-case-from pos="1">
						 <clip pos="2" side="tl" part="lem"/>
					 </get-case-from>
					 <lit-tag v="prn.pro.ref"/>
					 <clip pos="2" side="tl" part="persona"/>
					 <clip pos="2" side="tl" part="gen"/>
					 <clip pos="2" side="tl" part="nbr"/>
				 </lu>
				 <b/>
				 <lu>
					 <get-case-from pos="2">
						 <lit v="haber"/>
			  	  	</get-case-from>
					 <lit-tag v="vbhaver.pri"/>
					 <clip pos="1" side="sl" part="persona"/>
					 <clip pos="1" side="sl" part="nbr"/>
				 </lu>
				 <b/>
				 <lu>
					 <clip pos="1" side="tl" part="lem"/>
					 <clip pos="1" side="sl" part="a_verb"/>
					 <lit-tag v="pp"/>
					 <lit-tag v="m"/>
					 <lit-tag v="sg"/>
              			</lu>
			 </out>
		 </when>


          <when>
            <test>
              <and>
                <equal>
                  <clip pos="2" side="sl" part="a_prnenc"/>
                  <lit-tag v="prn.enc.ref"/>
                </equal>
                <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
                <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
                <not><equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="imp"/>
              </equal></not>
              </and>
            </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro.ref"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="persona"/>
              <clip pos="1" side="tl" part="nbr"/>
                </lu>    
  
            </out>
          </when>

	  
	
	  
	  <when>
		  <test>
			  <and>
				  <equal>
					  <clip pos="1" side="sl" part="temps"/>
					  <lit-tag v="ifi"/>
				  </equal>
				  
				  <equal>
					  <clip pos="2" side="sl" part="lem"/>
					  <lit v="lu"/>
				  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="gen"/>
					  <lit-tag v="m"/>
				  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="nbr"/>
					  <lit-tag v="sg"/>
				  </equal>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  
				  <clip pos="2" side="tl" part="whole"/>
			  </lu>
			  <b/> 
			  <lu>
				  <get-case-from pos="2">
					  <lit v="haber"/>
				  </get-case-from>
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
			  </lu>
			  
		  </out>
          </when>
	
	  <when>
		  <test>
			  <and>
				  
				  <equal>
					  <clip pos="2" side="sl" part="lem"/>
					  <lit v="lu"/>
				  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="gen"/>
					  <lit-tag v="m"/>
				  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="nbr"/>
					  <lit-tag v="sg"/>
				  </equal>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  
				  <clip pos="2" side="tl" part="whole"/>
			  </lu>
			  <b/> 
			  <lu>
				  <get-case-from pos="2">
					  <clip pos="1" side="tl" part="lem"/>
				  </get-case-from>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <clip pos="1" side="tl" part="temps"/>
				  <clip pos="1" side="tl" part="persona"/>
				  <clip pos="1" side="tl" part="nbr"/>
                         </lu>    
			  
		  </out>
          </when>
	  <when>
		  <test>
			  <and>
				  <equal>
					  <clip pos="1" side="sl" part="temps"/>
					  <lit-tag v="ifi"/>
					  </equal>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  <get-case-from pos="1">
					  <clip pos="2" side="tl" part="lem"/>
				  </get-case-from>
				  <lit-tag v="prn.pro"/>
				  <clip pos="2" side="sl" part="persona"/>
				  <clip pos="2" side="sl" part="gen"/>
				  <clip pos="2" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <get-case-from pos="2">
					  <lit v="haber"/>
				  </get-case-from>
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
              			</lu>
			  
		  </out>
          </when>

          <when>
            <test>
              <and>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out> 
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="sl" part="persona"/>
                <clip pos="2" side="sl" part="gen"/>
                <clip pos="2" side="sl" part="nbr"/>
              </lu>
	      <b/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>

          <otherwise>

    	    <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="sl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
               
                </lu>
              </mlu>
            </out>  
          </otherwise>
        </choose>     
      </action>
    </rule>
    
 
 
    
    <!--REGRA EGV02a1: V+ENC 
    nun ye que comiera -> no es que haya comido
    nun yera que cantara -> no era que hubiera cantado
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="nun"/>
		    <pattern-item n="ye"/>
		    <pattern-item n="queconj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
						    <equal>
							    <clip pos="2" side="tl" part="temps"/>
							    <lit-tag v="pri"/>
						    </equal>
						  
				    </test>
				             <out>
					    
						    <lu>
							    <clip pos="1" side="tl" part="whole"/>
							    
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
							    
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
							    
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.prs"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
					           </lu>
				    </out>  
			    </when>
			    <otherwise>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pis"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>
			   
	    </action>
    </rule>
    
    
    <!--REGRA EGV02a2: V+ENC 
    nun ye que María comiera -> no es que María haya comido
    nun yera que yo cantara -> no era que yo hubiera cantado
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="nun"/>
		    <pattern-item n="ye"/>
		    <pattern-item n="queconj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="2" side="tl" part="temps"/>
						    <lit-tag v="pri"/>
					    </equal>
					    
				    </test>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.prs"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </when>
			    <otherwise>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pis"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>
		    
	    </action>
    </rule>
    
    
    <!--REGRA EGV02a2: 
    nun ye que'l neñu comiera -> no es que el niño haya comido
    nun yera que los neños cantaran -> no era que los niños hubieran cantado
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="nun"/>
		    <pattern-item n="ye"/>
		    <pattern-item n="queconj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="2" side="tl" part="temps"/>
						    <lit-tag v="pri"/>
					    </equal>
					    
				    </test>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.prs"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </when>
			    <otherwise>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pis"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>
		    
	    </action>
    </rule>
    
    
    <!--REGRA EGV02a3: 
    nun ye que'l neñu altu comiera ->  no es que el niño alto haya comido
    nun yera que los neños pequeños cantaran ->   no era que los niños pequeños hubieran cantado
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="nun"/>
		    <pattern-item n="ye"/>
		    <pattern-item n="queconj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="2" side="tl" part="temps"/>
						    <lit-tag v="pri"/>
					    </equal>
					    
				    </test>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.prs"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </when>
			    <otherwise>
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pis"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>
		    
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02a: V+ENC 
    preguntó si cantara-y bien ->  ha preguntado si le había cantado bien 
    preguntaríes si viéranlos ellí -> preguntarías si los habían visto allí 
    preguntó si viéranse ellí -> ha preguntado si se habían visto allí
    nun preguntó si cantara-y bien -> no ha preguntado si le había cantado bien 
    nun preguntaríes si viéranlos ellí -> no preguntarías si los habían visto allí
    nun preguntó si viéranse ellí ->  no ha preguntado si se habían visto allí
    -->
    
   <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					  
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
		
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
					
						    <clip pos="4" side="tl" part="whole"/>
						  
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
		
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="gen"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
              			</lu>
					    
					    
					
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="gen"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
              			           </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					
						    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					  
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
					    <clip pos="3" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
  
    
    
    <!--REGRA EGV02b: 
    dixo que-y cantara ->    ha dicho que le había cantado 
    preguntaríes si lo vieran ellí  -> preguntarías si lo habían visto allí
    preguntó si se vieran ellí ->  ha preguntado si se habían visto allí
    preguntaríes si lu vieran ellí ->   preguntarías si le habían visto allí
    preguntaríes si les vieran ellí -> preguntarías si las habían visto allí
    nun dixo que-y cantara ->   no ha dicho que le había cantado
    nun preguntaríes si lo vieran ellí  -> no preguntarías si lo habían visto allí
    nun preguntó si se vieran ellí ->   no ha preguntado si se habían visto allí
    nun preguntaríes si lu vieran ellí -> no preguntarías si le habían visto allí
    nun preguntaríes si les vieran ellí -> no preguntarías si las habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						   
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
					    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						 
						
						    <clip pos="1" side="sl" part="whole"/>
						  
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			   
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						  
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					 
					    <lu>
						 
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						     <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						   
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
					
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						   
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						  
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			   
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						  
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
    
    <!--REGRA EGV02b2: 
    dixo que nun-y cantara ->        ha dicho que no le había cantado
    preguntaríes si nun lo vieran ellí  ->  preguntarías si no lo habían visto allí
    preguntó si nun se vieran ellí ->  ha preguntado si no se habían visto allí
    preguntaríes si nun lu vieran ellí ->    preguntarías si no le habían visto allí
    preguntaríes si nun les vieran ellí ->  preguntarías si no las habían visto allí
    nun dixo que nun-y cantara ->      no ha dicho que no le había cantado
    nun preguntaríes si nun lo vieran ellí  ->  no preguntarías si no lo habían visto allí
    nun preguntó si nun se vieran ellí ->    no ha preguntado si no se habían visto allí
    nun preguntaríes si nun lu vieran ellí ->   no preguntarías si no le habían visto allí
    nun preguntaríes si nun les vieran ellí ->    no preguntarías si no las habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
    <!--REGRA EGV02aa: V+ENC 
	      y cantara-y bien -> y le cantara bien
    y viéranlu ellí -> y le vieran allí
    y viéranles ellí -> y las vieran allí
    y viéranse ellí ->  y se vieran allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
						    <equal>
							    <clip pos="3" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						
				    </test>
				    <out>
					
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
						    <equal>
							    <clip pos="3" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						
				    </test>
				    <out>
					    
					
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    

			   
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out> 
					
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						  
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			 
			
			    <otherwise>
				    
				    <out>
					    
					
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="gen"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    
					
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
    
    
    <!--REGRA EGV02a2d: V+ENC 
    Que-yos cantara -> Que les cantara
    Que lo comiera ->   Que lo comiera
    Que se comiera un filete ->   Que se comiera un filete
    Que les mordiera ->  Que las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02a2d: V+ENC 
    Que nun-yos cantara ->    Que no les cantara
    Que nun lo comiera ->      Que no lo comiera
    Que nun se comiera un filete ->   Que no se comiera un filete
    Que nun les mordiera ->    Que no las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    <!--REGRA EGV02a2: V+ENC 
     preguntó si la neña cantara-y bien ->   ha preguntado si la niña le había cantado bien
    preguntaríes si la neña bebiéralo bien ->   preguntarías si la niña lo había bebido bien
    preguntaríes si la neña vistiérase bien ->  preguntarías si la niña se había vestido bien
    nun preguntó si la neña cantara-y bien ->  no ha preguntado si la niña le había cantado bien
    nun preguntaríes si la neña bebiéralo bien ->   no preguntarías si la niña lo había bebido bien
    nun preguntaríes si la neña vistiérase bien ->  preguntarías si la niña se había vestido bien
    -->
    
   
	    <rule>
		    <pattern>
			    <pattern-item n="verb"/>
			    <pattern-item n="cnj"/>
			    <pattern-item n="adj_det_num_nom"/>
		            <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="plus"/>
			    <pattern-item n="prnenc"/>
		    </pattern>
		    <action>
			    <choose>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    
						    <lu>
							    <get-case-from pos="1">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    
						    <lu>
							    <get-case-from pos="2">
								    <clip pos="1" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>   
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="m"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="nbr"/>
								    <lit-tag v="sg"/>
						            </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="m"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="nbr"/>
								    <lit-tag v="sg"/>
						            </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <clip pos="1" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>    
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							
							    <clip pos="6" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				 
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="gen"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <clip pos="1" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>   
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="gen"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    <otherwise>
					    
					    <out>
						    
						    
						    <lu>
							    <clip pos="1" side="tl" part="whole"/>
							    
						    </lu>
						    
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="6" side="tl" part="lem"/>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="gen"/>
							    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    </lu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
    </rule>
 
    
    
    <!--REGRA EGV02b2: 
    dixo que'l neñu-y cantara ->        ha dicho que el niño le había cantado
    preguntaríes si el perru lo vieran ellí  ->  preguntarías si el perro lo habían visto allí
    preguntó si los neños se vieran ellí ->      ha preguntado si los niños se habían visto allí
    preguntaríes si el neñu lu vieran ellí ->   preguntarías si el niño le habían visto allí
    preguntaríes si les manzanes les vieran ellí ->  preguntarías si las manzanas las habían visto allí
    nun dixo que'l neñu-y cantara ->    no ha dicho que el niño le había cantado
    nun preguntaríes si el perru lo vieran ellí  ->     no preguntarías si el perro lo habían visto allí
    nun preguntó si los neños se vieran ellí ->     no ha preguntado si los niños se habían visto allí
    nun preguntaríes si el neñu lu vieran ellí ->  no preguntarías si el niño le habían visto allí 
    nun preguntaríes si les manzanes les vieran ellí -> no preguntarías si las manzanas las habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02b3: 
    dixo que'l neñu altu-y cantara ->  ha dicho que el niño alto le había cantado
    preguntaríes si el perru malu lo vieran ellí  ->   preguntarías si el perro malo lo habían visto allí
    preguntó si los neños rubios se vieran ellí ->       ha preguntado si los niños rubios se habían visto allí
    preguntaríes si el neñu altu lu vieran ellí ->     preguntarías si el niño alto le habían visto allí
    preguntaríes si les manzanes verdes les vieran ellí ->    preguntarías si las manzanas verdes las habían visto allí
    nun dixo que'l neñu altu-y cantara ->      no ha dicho que el niño alto le había cantado
    nun preguntaríes si el perru malu lo vieran ellí  ->      no preguntarías si el perro malo lo habían visto allí
    nun preguntó si los neños rubios se vieran ellí ->    no ha preguntado si los niños rubios se habían visto allí
    nun preguntaríes si el neñu altu lu vieran ellí ->    no preguntarías si el niño alto le habían visto allí
    nun preguntaríes si les manzanes verdes les vieran ellí ->  no preguntarías si las manzanas verdes las habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="7">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="7">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    <!--REGRA EGV02b23: 
	      dixo que'l neñu nun-y cantara ->  ha dicho que el niño no le había cantado
    preguntaríes si los neños nun lo vieran ellí  ->   preguntarías si los niños no lo habían visto allí
    preguntó si los neños nun se vieran ellí ->  ha preguntado si los niños no se habían visto allí
    preguntaríes si el perru nun lu vieran ellí ->    preguntarías si el perro no le habían visto allí
    preguntaríes si les manzanes nun les vieran ellí ->   preguntarías si las manzanas no las habían visto allí
    nun dixo que'l neñu nun-y cantara ->   no ha dicho que el niño no le había cantado
    nun preguntaríes si los neños nun lo vieran ellí  ->      no preguntarías si los niños no lo habían visto allí
    nun preguntó si los neños nun se vieran ellí ->    no ha preguntado si los niños no se habían visto allí
    nun preguntaríes si el perru nun lu vieran ellí ->     no preguntarías si el perro no le habían visto allí
    nun preguntaríes si les manzanes nun les vieran ellí ->    no preguntarías si las manzanas no las habían visto allí
    -->
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="7">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="7">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02b24: 
	      dixo que'l neñu rubiu nun-y cantara ->    ha dicho que el niño rubio no le había cantado
    preguntaríes si los neños altos nun lo vieran ellí  ->    preguntarías si los niños altos no lo habían visto allí
    preguntó si los neños altos nun se vieran ellí ->  ha preguntado si los niños altos no se habían visto allí
    preguntaríes si el perru malu nun lu vieran ellí ->    preguntarías si el perro malo no le habían visto allí
    preguntaríes si les manzanes verdes nun les vieran ellí ->    preguntarías si las manzanas verdes no las habían visto allí
    nun dixo que'l neñu altu nun-y cantara ->    no ha dicho que el niño alto no le había cantado
    nun preguntaríes si los neños rubios nun lo vieran ellí  ->         no preguntarías si los niños rubios no lo habían visto allí
    nun preguntó si los neños rubios nun se vieran ellí ->        no ha preguntado si los niños rubios no se habían visto allí
    nun preguntaríes si el perru malu nun lu vieran ellí ->         no preguntarías si el perro malo no le habían visto allí
    nun preguntaríes si les manzanes verdes nun les vieran ellí ->     no preguntarías si las manzanas verdes no las habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="8">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="8">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="8">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="8">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="8" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="8" side="sl" part="persona"/>
						    <clip pos="8" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="8" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02a2a: V+ENC 
    si la neña cantara-y bien ->   si la niña le cantara bien
    si la neña bebiéralo ->   si la niña lo bebiera
    si la neña vistiérase bien ->  si la niña se vistiera bien
    -->
    
    
    <rule>
	    <pattern>
		   
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
						    <equal>
							    <clip pos="5" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						
				    </test>
				    <out>
					    
					   
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			
			    
			    <when>
				    <test>
					    <and>
						   
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						   
					    </and>
				    </test>
				    <out> 
					    
					 
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			   
			
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						   
					    </and>
				    </test>
				    <out> 
					    
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			
			    
			    <when>
				    <test>
					 
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
					
				    </test>
				    <out> 
					    
					
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    
					    
	
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02a2c: V+ENC 
    Que'l neñu-y cantara ->  Que el niño le cantara
    Que'l neñu lo comiera -> Que el niño lo comiera
    Que'l neñu se comiera el filete ->   Que el niño se comiera el filete
    Que'l perru les mordiera ->  Que el perro las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					   
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					   
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					 
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					  
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					  
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02a2c: V+ENC 
    Que'l neñu-y cantara ->     Que el niño no le cantara
    Que'l neñu nun lo comiera ->     Que el niño no lo comiera
    Que'l neñu nun se comiera el filete ->     Que el niño no se comiera el filete
    Que'l perru nun les mordiera ->   Que el perro no las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    <!--REGRA EGV02a2a: V+ENC 
    preguntó si la neña rubia cantara-y bien ->   ha preguntado si la niña rubia le había cantado bien 
    preguntaríes si la neña rubia bebiéralo bien ->   preguntarías si la niña rubia lo había bebido bien 
    preguntaríes si la neña rubia vistiérase bien ->    preguntarías si la niña rubia se había vestido bien
    -->
    
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="7" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="7" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>  
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="7" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="7" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu> 
					           <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="7" side="tl" part="persona"/>
						    <clip pos="7" side="tl" part="gen"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="whole"/>
							    
						    </lu>  
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02a2a: V+ENC 
	      si la neña rubia cantara-y -> si la niña rubia le cantara
    si la neña rubia bebiéralo ->  si la niña rubia lo bebiera
    si la neña rubia vistiérase->     si la niña rubia se vistiera
    -->
    
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					
						    <equal>
							    <clip pos="6" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						  
				    </test>
				    <out>
					    
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
	
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						   
					    </and>
				    </test>
				    <out> 
					    
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			  
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out> 
					    
					   
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    
			
			    <when>
				    <test>
					  
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						
				    </test>
				    <out> 
					    
					 
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			
			    <otherwise>
				    
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
						    
					    </lu>  
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    

  <!--REGRA EGV02a2b: V+ENC 
  Que'l neñu altu-y cantara -> Que el niño alto le cantara
  Que'l neñu rubiu lo comiera ->    Que el niño rubio lo comiera
  Que'l neñu rubiu se comiera el filete ->   Que el niño rubio se comiera el filete
  Que'l perru malu les mordiera -> Que el perro malo las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			  
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02a2b: V+ENC 
    Que'l neñu altu nun-y cantara ->  Que el niño alto no le cantara 
    Que'l neñu rubiu nun lo comiera ->     Que el niño rubio no lo comiera
    Que'l neñu rubiu nun se comiera el filete ->       Que el niño rubio no se comiera el filete
    Que'l perru malu nun les mordiera -> Que el perro malo no las mordiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="6" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="6" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

  
    <!--REGRA EGV02a3: V+ENC 
    preguntó si María cantára-y bien ->  ha preguntado si María le había cantado bien
    preguntaríes si María bebiéralo bien ->  preguntarías si María lo había bebido bien
    preguntaríes si María vistiérase bien -> preguntarías si María se había vestido #bien 
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					  
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					 
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					   
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>  
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					   
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					   
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					  
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					  
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
						   
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					  
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="whole"/>
							   
						    </lu>  
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02a3a: V+ENC 
     si María cantára-y  ->  si María le cantara  
    si yo bebiéralo ->  si yo lo bebiera
    si María vistiérase -> si María se vistiera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
						    <equal>
							    <clip pos="4" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						   
				    </test>
				    <out>
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			 
			
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						   
					    </and>
				    </test>
				    <out> 
					    
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			 
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="nbr"/>
							    <lit-tag v="sg"/>
						    </equal>
						 
					    </and>
				    </test>
				    <out> 
					    
					  
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						  
				    </test>
				    <out> 
					    
					 
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    
					    
				    </out>
			    </when>
			    
			
			    <otherwise>
				    
				    <out>
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="lem"/>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>  
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
   
    
    
    <!--REGRA EGV02a3a1:
    preguntó si María-y cantara ->    ha preguntado si María le había cantado
    preguntó si yo lo comiera ->     me ha preguntado si yo lo había comido
    dixo que María lu vistiera ->   ha dicho que María le había vestido
    preguntaríes si María les viera ->  preguntarías si María las había visto 
    dixo que el te viera -> ha dicho que el te había visto
    nun preguntó si María-y cantara ->   no ha preguntado si María le había cantado
    nun preguntó si yo lo comiera ->     no ha preguntado si yo lo había comido
    nun dixo que María lu vistiera ->   no ha dicho que María le había vestido
    nun preguntaríes si María les viera ->    no preguntarías si María las había visto
    nun dixo que el te viera -> no ha dicho que el te había visto
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
						    
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    
						    <clip pos="1" side="sl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    
					    
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
    <!--REGRA EGV02a3a1:
     preguntó si María nun-y cantara ->    ha preguntado si María no le había cantado 
    preguntó si yo nun lo comiera ->     ha preguntado si yo no lo había comido
    dixo que María nun lu vistiera ->     ha dicho que María no le había vestido
    preguntaríes si María nun les viera ->    preguntarías si María no las había visto 
    dixo que el nun te viera ->   ha dicho que el no te había visto 
    nun preguntó si María nun-y cantara ->  no ha preguntado si María no le había cantado
    nun preguntó si yo nun lo comiera ->    no ha preguntado si yo no lo había comido 
    nun dixo que María nun lu vistiera ->   no ha dicho que María no le había vestido
    nun preguntaríes si María nun les viera ->       no preguntarías si María no las había visto
    nun dixo que el nun te viera ->     no ha dicho que el no te había visto
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    
					    <lu>
						    <get-case-from pos="1">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal caseless="yes">
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="-y"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    
						    <lu>
							    
							    
							    <clip pos="1" side="sl" part="whole"/>
							    
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="m"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="6">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="m"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    
							    <clip pos="1" side="sl" part="whole"/>
							    
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="6">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ifi"/>
							    </equal>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pri"/>
							    <clip pos="1" side="sl" part="persona"/>
							    <clip pos="1" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="1" side="tl" part="lem"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="5" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="6" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="1" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    
						    <lu>
							    <get-case-from pos="2">
								    <clip pos="1" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>   
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="5" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <lit v="haber"/>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="6" side="sl" part="persona"/>
							    <clip pos="6" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
					    </out>
				    </when>
				    
				    <otherwise>
					    
					    <out>
						    
						    
						    <lu>
							    <clip pos="1" side="tl" part="whole"/>
						    </lu>
						    
						    <b/>
						    <lu>
							    <clip pos="2" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="3" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="4" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <clip pos="5" side="tl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="6" side="tl" part="whole"/>
						    </lu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
    </rule>
    
    <!--REGRA EGV02a3a: V+ENC 
    Que María-y cantara ->   Que María le cantara
    Que yo lo comiera ->   Que yo lo comiera
    Que María lu vistiera ->  Que María le vistiera
    -->
   
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		  
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			  
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
				         </and>
					
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>

			    <otherwise>
				    
				    <out>
					    <lu>
					    
					    <clip pos="1" side="tl" part="whole"/>
					    
					    
				           </lu>
					   <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02a3a: V+ENC 
    Que María nun-y cantara ->  Que María no le cantara
    Que yo nun lo comiera ->   Que yo no lo comiera
    Que María nun lu vistiera ->  Que María no le vistiera 
    Que yo nun les viera ->   Que yo no las viera
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <and> 
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02b1: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
    Cuando lu llamé ->  Cuando le llamé
    Cuando-yos debía ->  Cuando les debía 
    Cuando-yos debió ->  Cuando les debió
    Cuando se bebió el agua ->  Cuando se bebió el agua
    ¿Cuando lo comió? -> Cuando lo comió
    Cuando los comería -> Cuando les comería
    Cuando-y cantara -> Cuando le había cantado
    Cuando nun-yos debió -> Cuando no les ha debido
    Cuando nun-yos debía ->  Cuando no les debía
    Cuando les vi -> Cuando las vi
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
		
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
		
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <and>
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    <equal>
						    <clip pos="2" side="sl" part="gen"/>
					 	    <lit-tag v="nt"/>
				           </equal>
				   </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
		
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    

    
    <!--REGRA EGV02b12: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
	      Cuando nun lu llamé ->      Cuando no le llamé
    Cuando nun-yos debía ->  Cuando no les debía 
    Cuando nun-yos debió ->  Cuando no les debió
    Cuando nun se bebió el agua ->   Cuando no se bebió el agua 
    Cuando nun los comería ->    Cuando no les comería 
    Cuando nun les comió ->        Cuando no las comió
    Cuando nun lu vio ->    Cuando no le vio
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					   <and> 
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    <equal>
						    <clip pos="3" side="sl" part="gen"/>
						    <lit-tag v="nt"/>
					   </equal>
				         </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02b2: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
    Cuando yo lu llamé ->   Cuando yo le llamé
    Cuando María-yos cantaba ->   Cuando María les cantaba
    Cuando Juan-yos cantó ->   Cuando Juan les cantó
    Cuando Juan se bebió l'agua ->    Cuando Juan se bebió el agua
    Cuando María lo bebió ->     Cuando María lo bebió
    Cuando yo les vi ->     Cuando yo las vi
    -->
    

    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    <equal>
						    <clip pos="3" side="sl" part="gen"/>
						    <lit-tag v="nt"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					   
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    
    <!--REGRA EGV02b23: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
	      Cuando yo nun lu llamé ->  Cuando yo no le llamé
    Cuando María nun-yos cantaba -> Cuando María no les cantaba
    Cuando Juan nun-yos cantó -> Cuando Juan no les cantó
    Cuando Juan nun se bebió l'agua ->   Cuando Juan no se bebió el agua
    Cuando María nun lo bebió ->  Cuando María no lo bebió 
    Cuando yo nun les vi ->    Cuando yo no las vi
    -->
    
    
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02b3
    Cuando'l sacerdote lu llamó -> Cuando el sacerdote le llamó 
    Cuando los neños cantaben ->  Cuando los niños cantaban
    Cuando el neñu lo comió ->   Cuando el niño lo comió
    Cuando el neñu les come ->   Cuando el niño las come
    Cuando el sacerdote se pregunta por el futuru ->   Cuando el sacerdote se pregunta por el futuro
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
					    	   </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    <equal>
						    <clip pos="4" side="sl" part="gen"/>
						    <lit-tag v="nt"/>
					    </equal>
				    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    
    <!--REGRA EGV02b32
    Cuando'l sacerdote nun lu llamó ->   Cuando el sacerdote no le llamó 
    Cuando los neños nun cantaben ->      Cuando los niños no cantaban
    Cuando el neñu nun lo comió ->      Cuando el niño no lo comió
    Cuando el neñu nun les come ->    Cuando el niño no las come
    Cuando el sacerdote nun se pregunta por el futuru ->       Cuando el sacerdote no se pregunta por el futuro
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    <!--REGRA EGV02b4
    Cuando'l sacerdote altu lu llamó ->  Cuando el sacerdote alto le llamó
    Cuando los neños rubios les cantaben ->  Cuando los niños rubios las cantaban
    Cuando el neñu altu-yos cantó ->   Cuando el niño alto les cantó
    Cuando el neñu altu lo comió ->   Cuando el niño alto lo comió
    Cuando los neños rubios se vean ->  Cuando los niños rubios se vean
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
					    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <and>
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    <equal>
						    <clip pos="5" side="sl" part="gen"/>
						    <lit-tag v="nt"/>
					    </equal>
				    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    
    <!--REGRA EGV02b42
    Cuando'l sacerdote altu nun lu llamó ->     Cuando el sacerdote alto no le llamó
    Cuando los neños rubios nun les cantaben ->    Cuando los niños rubios no las cantaban
    Cuando el neñu altu nun-yos cantó ->       Cuando el niño alto no les cantó 
    Cuando el neñu altu  nun lo comió ->       Cuando el niño alto no lo comió 
    Cuando los neños rubios nun se vistan ->  Cuando los niños rubios no se vean
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="nun"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="7" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="6" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <clip pos="6" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="7" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="7">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="7" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="7">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
					    </and>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="7" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="7" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="7">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="6" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="7" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="7">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="7" side="sl" part="persona"/>
						    <clip pos="7" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="7" side="tl" part="lem"/>
						    <clip pos="7" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="7" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    <!--REGRA EGV02b: proclise + ENC + Verbo  
    Nun lu llamé ->  No le  he llamado 
    Que-yos debía -> Que les debía
    Que-yos debió ->  Que les ha debido
    Nun se bebió el agua -> No se ha bebido el agua
    Nun lo comió -> No lo ha comido
    Nun los comería -> No les comería
    Nun cantara -> No había cantado
    el sacerdote nun lo comió -> El sacerdote no lo ha comido 
    el sacerdote nun lo bebería -> el sacerdote no lo bebería 
    -->
    
  <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
				
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						     <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
 
    <!--REGRA EGV02ba: proclise + ENC + Verbo  
    Lo que María-yos debía ->  Lo que María les debía
    Lo que yo-y debí -> Lo que yo le he debido 
    Pero tu te bebisti el agua -> Pero tú te has bebido el agua
    Lo que tu-yos contaras ->  Lo que tú les habías contado
   
   
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02ba: proclise + ENC + Verbo  
     Lo que'l neñu-yos debía ->    Lo que el niño les debía 
    Lo que'l sacerdote te mercó -> Lo que el sacerdote te ha comprado
    Pero la neña te bebió el agua -> Pero la niña te ha bebido el agua 
    Lo que'l neñu-yos contara ->  Lo que el niño les había contado
    
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02ba2: proclise + ENC + Verbo  
    Lo que'l neñu rubiu-yos debía ->  Lo que el niño rubio les debía
    Lo que'l sacerdote altu te mercó -> Lo que el sacerdote alto te ha comprado 
    Pero la neña rubia te bebió el agua ->  Pero la niña rubia te ha bebido el agua 
    Lo que'l neñu rubiu-yos contara ->  Lo que el niño rubio les había contado
  
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
 <!--REGRA EGV03: V+ENC+ENC
cómese-yos->se les come
mercómelo->me lo compró
-->
    <rule>
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
         
		<when>
			<test>
				<and>
					<equal>
						<clip pos="3" side="sl" part="lem"/>
						<lit v="lu"/>
					</equal>
					<equal>
						<clip pos="3" side="sl" part="gen"/>
						<lit-tag v="m"/>
					</equal>
					<equal>
						<clip pos="3" side="sl" part="nbr"/>
						<lit-tag v="sg"/>
					</equal>
					
					<equal>
						<clip pos="2" side="sl" part="a_prnenc"/>
						<lit-tag v="prn.enc.ref"/>
					</equal>
					<not><equal>
							<clip pos="1" side="sl" part="temps"/>
							<lit-tag v="inf"/>
						</equal></not>
					<not><equal>
							<clip pos="1" side="sl" part="temps"/>
							<lit-tag v="ger"/>
						</equal></not>
					<not><equal>
							<clip pos="1" side="sl" part="temps"/>
							<lit-tag v="imp"/>
						</equal></not>
				</and>
			</test>
			<out>
				<lu>
					<get-case-from pos="1">
						<clip pos="2" side="tl" part="lem"/>
					</get-case-from>
					<lit-tag v="prn.pro.ref"/>
					<clip pos="2" side="tl" part="persona"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b/>
				<lu>
				
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b/>
				<lu>
					<get-case-from pos="3">
						<clip pos="1" side="tl" part="lem"/>
					</get-case-from>
					<clip pos="1" side="sl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="nbr"/>
				</lu>    
				
			</out>
          </when>
		
	
          <when>
            <test>
              <and>
                <equal>
                  <clip pos="2" side="sl" part="a_prnenc"/>
                  <lit-tag v="prn.enc.ref"/>
                </equal>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro.ref"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="sl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>
          
            <when>
            <test>
              <and>
		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
              
		<equal>
			<clip pos="3" side="sl" part="gen"/>
			<lit-tag v="m"/>
		</equal>
		<equal>
			<clip pos="3" side="sl" part="nbr"/>
			<lit-tag v="sg"/>
		</equal>
              
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
             <lu>
              
            <clip pos="3" side="tl" part="whole"/>
	    </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>

          <when>
            <test>
              <and>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="sl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>         
          
	  <otherwise>
	    <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="sl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prnenc"/>                  
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_prnenc"/>              
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>  
          </otherwise>
        </choose>
      </action>
    </rule>



<!--REGRA EGV03b: proclise + ENC + ENC + Verbo  
Que me lu comió -> Que me le comió
Nun te-y debía -> No te le debía
-->

  <rule>
      <pattern>
	<pattern-item n="proclise"/>
	<pattern-item n="prnpro"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="verb"/>
        
      </pattern>
      <action>
         <choose>

             <when>
            <test>
              
                 <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="-y"/>
                </equal>
       
            </test>
          <out>
	 <lu>
              
                <clip pos="1" side="tl" part="whole"/>
              
             
            </lu><b/>
	    <lu>
              
                <clip pos="2" side="tl" part="whole"/>
              
             
            </lu><b/>
            <lu>
              <get-case-from pos="4">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              
              <clip pos="4" side="sl" part="whole"/>
            </lu>    
  
            </out>
          </when>

          <otherwise>

    	    <out>
               <lu>
            
                <clip pos="1" side="tl" part="whole"/>
          
             
            </lu><b/>
	    <lu>
            
                <clip pos="2" side="tl" part="whole"/>
          
             
            </lu><b/>
            <lu>
	        <get-case-from pos="3">
		<lit v="le"/>
               </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <lit-tag v="mf"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              
              <clip pos="4" side="sl" part="whole"/>
      
                </lu>    
  
            </out>  
          </otherwise>
        </choose>     
      </action>
    </rule>

	
	
  <!--REGLA verbos_ast 1: 
	Cantaría, si non, … > habrá cantado, si no, …
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>			
          </out>
        </action>
      </rule>	
	
	
  <!--REGLA verbos_ast 1': 
	Cantaría+enc, si non, … > prnpro habrá cantado, si no, …
  Cantaríalo, si non, -> Lo habrá cantado, si no,
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="prnenc"/>		
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="2" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>	  
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>			
          </out>	  
	  </when>
	  <when>
		<test>
			<and>
				<equal>
					<clip pos="2" side="sl" part="lem"/>
					<lit v="lu"/>
				</equal>
				<equal>
					<clip pos="2" side="sl" part="nbr"/>
					<lit-tag v="sg"/>
				</equal>		
				<equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="m"/>
				</equal>				
			</and>
		</test>
         <out>
             <lu>
				
				<clip pos="2" side="tl" part="whole"/>
	        </lu>	
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>			
          </out>
		</when>
		 <otherwise>
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="2" side="sl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>			
          </out>	  
		 </otherwise>
		 </choose>
		</action>
		
      </rule>	
		

		
		
  <!--REGLA verbos_ast 1'': 
	Cantaría+enc Xuan, si non, … > prnpro habrá cantado Xuan, si no, …
  Cantaríalo María, si non, -> Lo cantaría María, si non,
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="prnenc"/>		
        <pattern-item n="categorias3"/>		
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="2" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>	  
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>	
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>			
          </out>	  
	  </when>
	  <when>
		<test>
			<and>
				<equal>
					<clip pos="2" side="sl" part="lem"/>
					<lit v="lu"/>
				</equal>
				<equal>
					<clip pos="2" side="sl" part="nbr"/>
					<lit-tag v="sg"/>
				</equal>		
				<equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="m"/>
				</equal>				
			</and>
		</test>
         <out>
             <lu>
				<get-case-from pos="1">
					<lit v="le"/>
				 </get-case-from>
				 <lit-tag v="prn.pro"/>
				 <clip pos="2" side="tl" part="persona"/>
				 <lit-tag v="mf"/>
				<clip pos="2" side="tl" part="nbr"/>
	        </lu>	
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>			
          </out>
		</when>
		 <otherwise>
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>			
          </out>	  
		 </otherwise>
		 </choose>
		</action>
		
      </rule>	
				
		
  <!--REGLA verbos_ast 1''': 
	Cantaría+enc el andamiu, si non, … > prnpro habrá cantado el andamiu, si no, …
       Cantaríalo el perru, si non,  -> Lo habrá cantado el perro, si no, 
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="prnenc"/>		
		<pattern-item n="adj_det_num_nom"/>
		<pattern-item n="adj_det_num_nom"/>	
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="2" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>	  
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>	
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>			
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>			
          </out>	  
	  </when>
	  <when>
		<test>
			<and>
				<equal>
					<clip pos="2" side="sl" part="lem"/>
					<lit v="lu"/>
				</equal>
				<equal>
					<clip pos="2" side="sl" part="nbr"/>
					<lit-tag v="sg"/>
				</equal>		
				<equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="m"/>
				</equal>				
			</and>
		</test>
         <out>
             <lu>
				<get-case-from pos="1">
					<lit v="le"/>
				 </get-case-from>
				 <lit-tag v="prn.pro"/>
				 <clip pos="2" side="tl" part="persona"/>
				 <lit-tag v="mf"/>
				<clip pos="2" side="tl" part="nbr"/>
	        </lu>	
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>			
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>			
          </out>
		</when>
		 <otherwise>
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>		
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>			
          </out>	  
		 </otherwise>
		 </choose>
		</action>
		
      </rule>			
		
		
		  <!--REGLA verbos_ast 1b: 
	Cantaría Juan, si non, … > Habrá cantado Juan, si no,
        Nun cantaría Juan, si non, -> No habrá cantado Juan, si no, 
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="categorias3"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="3">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>	
			<b/>
			<lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
						
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>			
          </out>
        </action>
      </rule>	

	  
	<!--REGLA verbos_ast 1c: 
        Cantaría el neñu, si non, … > Habrá cantado el niño, si no,
	Nun cantaría el neñu, si non -> No habrá cantado el niño, si no,
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="adj_det_num_nom"/>
		<pattern-item n="adj_det_num_nom"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>	
			<b/>
			<lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			
			<b/>
			<lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
						
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>			
          </out>
        </action>
      </rule>	
	  
	
	
   <!--REGLA verbos_ast 2: condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
       Cantaría, si non, baillaría ->    Habrá cantado, si no, habría bailado 
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>			
			<lu>
				<get-case-from pos="6">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="6" side="sl" part="persona"/>
				<clip pos="6" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="6">			
				<clip pos="6" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="6" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>			
	  
	  
	  
   <!--REGLA verbos_ast 2': condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría el andamiu, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
        Cantaría el neñu, si non, baillaría ->  Habrá cantado el niño, si no, habría bailado
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="adj_det_num_nom"/>
		<pattern-item n="adj_det_num_nom"/>		
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
			<b/>			
			<lu>
				<get-case-from pos="8">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="8" side="sl" part="persona"/>
				<clip pos="8" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="8">			
				<clip pos="8" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="8" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>			
	  	  
   <!--REGLA verbos_ast 2'': condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría el andamiu, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
        Cantaría María, si non, baillaría ->     Habrá cantado María, si no, habría bailado 
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="categorias3"/>	
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="3">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>	
			<b/>			
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>			
			<lu>
				<get-case-from pos="7">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="7" side="sl" part="persona"/>
				<clip pos="7" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="7">			
				<clip pos="7" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="7" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>			
	  
	
   <!--REGLA verbos_ast 2b: condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto + encl
	Cantaría, si non, imperfecto/condicional/ pluscuamperfecto enc -> habrá cantado, si no, enc condicional compuesto
	 Cantaría, si non, pegáben-y > habrá cantado, si no, le habrían pegado	
   -->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>		
        <pattern-item n="imp_cond_plus"/>		
        <pattern-item n="prnenc"/>			
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="7" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>
	 
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
				<get-case-from pos="6">
					<clip pos="7" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="7" side="tl" part="persona"/>
				<clip pos="7" side="tl" part="gen"/>
				<clip pos="7" side="tl" part="nbr"/>
			</lu>			
			<b/>				
			<lu>
				<get-case-from pos="6">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="6" side="sl" part="persona"/>
				<clip pos="6" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="6">			
				<clip pos="6" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="6" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
		</when>
	  <when>
		<test>
			<and>
				<equal>
					<clip pos="7" side="sl" part="lem"/>
					<lit v="lu"/>
				</equal>
				<equal>
					<clip pos="7" side="sl" part="nbr"/>
					<lit-tag v="sg"/>
				</equal>		
				<equal>
					<clip pos="7" side="sl" part="gen"/>
					<lit-tag v="m"/>
				</equal>				
			</and>
		</test>
	 
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>
             <lu>
				<get-case-from pos="6">
					<lit v="le"/>
				 </get-case-from>
				 <lit-tag v="prn.pro"/>
				 <clip pos="7" side="tl" part="persona"/>
				 <lit-tag v="mf"/>
				<clip pos="7" side="tl" part="nbr"/>
	        </lu>					
			<b/>				
			<lu>
				<get-case-from pos="6">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="6" side="sl" part="persona"/>
				<clip pos="6" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="6">			
				<clip pos="6" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="6" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
		</when>		
		<otherwise>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
				<get-case-from pos="6">
					<clip pos="7" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="7" side="tl" part="persona"/>
				<clip pos="7" side="tl" part="gen"/>
				<clip pos="7" side="tl" part="nbr"/>
			</lu>			
			<b/>				
			<lu>
				<get-case-from pos="6">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="6" side="sl" part="persona"/>
				<clip pos="6" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="6">			
				<clip pos="6" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="6" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>		
		</otherwise>
		</choose>
        </action>
      </rule>				  
	  

   <!--REGLA verbos_ast 2c: condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
       Cantaría, si non, nun baillaría -> Habrá cantado, si no, no habría bailado 
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>	
		<pattern-item n="nun"/>	
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>	
			<lu>
				<get-case-from pos="7">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="7" side="sl" part="persona"/>
				<clip pos="7" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="7">			
				<clip pos="7" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="7" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>			
	  
	  	  
	  
   <!--REGLA verbos_ast 2d: condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
       Cantaría, si non, nun-y pegaben -> Habrá cantado, si no, no le habrían pegado
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>	
		<pattern-item n="nun"/>	
		<pattern-item n="encpro"/>			
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>	
			<lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
			<b/>				
			<lu>
				<get-case-from pos="8">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="8" side="sl" part="persona"/>
				<clip pos="8" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="8">			
				<clip pos="8" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="8" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>				  

	  
   <!--REGLA verbos_ast 2d: condicional+si+no+verbo imperfecto/condicional/ pluscuamperfecto
	Cantaría, si non, imperfecto/condicional/ pluscuamperfecto -> habrá cantado, si no, imperfecto/condicional/ pluscuamperfecto
       Cantaría, si non, nun te la pegaben -> Habrá cantado, si no, no te la habrían pegado
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="coma"/>
        <pattern-item n="siconj"/>
		<pattern-item n="non"/>
        <pattern-item n="coma"/>	
		<pattern-item n="nun"/>	
		<pattern-item n="encpro"/>		
		<pattern-item n="encpro"/>			
        <pattern-item n="imp_cond_plus"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>			
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
			<b/>	
			<lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
			<b/>		
			<lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
			<b/>			
			<lu>
				<get-case-from pos="9">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="9" side="sl" part="persona"/>
				<clip pos="9" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="9">			
				<clip pos="9" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="9" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>
          </out>
        </action>
      </rule>			

	  
   <!--REGLA verbos_ast 3:
	Cantaría  yá> habría cantado ya
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
		<pattern-item n="yá"/>		
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			
          </out>
        </action>
      </rule>			

   <!--REGLA verbos_ast 3b:
	Cantaríate  yá > te habría cantado ya
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="prnenc"/>		
		<pattern-item n="yá"/>		
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="2" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>	  
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>			
			<b/>			 
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </out>
		</when>
		<otherwise>
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>			
			<b/>			 
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </out>		
		</otherwise>
		</choose>
        </action>
      </rule>
	  
	

   <!--REGLA verbos_ast 3c:
	Cantaríase-y yá > te habría cantado ya
	-->
    <rule>
      <pattern>
        <pattern-item n="cond"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>			
		<pattern-item n="yá"/>		
      </pattern>
      <action>
	  <choose>
	  <when>
		<test>
				<equal>
					<clip pos="2" side="sl" part="a_prnenc"/>
					<lit-tag v="prn.enc.ref"/>
				</equal>
		</test>	  
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro.ref"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>			
			<b/>	
			<lu>
				<get-case-from pos="2">
					<clip pos="3" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="3" side="tl" part="persona"/>
				<clip pos="3" side="tl" part="gen"/>
				<clip pos="3" side="tl" part="nbr"/>
			</lu>			
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </out>
		</when>
		<otherwise>
         <out>
			<lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="2" side="tl" part="persona"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>			
			<b/>	
			<lu>
				<get-case-from pos="2">
					<clip pos="3" side="tl" part="lem"/>
				</get-case-from>
				<lit-tag v="prn.pro"/>
				<clip pos="3" side="tl" part="persona"/>
				<clip pos="3" side="tl" part="gen"/>
				<clip pos="3" side="tl" part="nbr"/>
			</lu>			
			<b/>			
            <lu>
				<get-case-from pos="2">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="2">			
				<clip pos="1" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="1" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>		
			<b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </out>	
		</otherwise>
		</choose>
        </action>
      </rule>
	  
	
	
   <!--REGLA verbos_ast 4:
	nun sabes cómo cantaría > no sabes cómo habría cantado
	-->
    <rule>
      <pattern>
        <pattern-item n="nun"/>
		<pattern-item n="saber"/>	
		<pattern-item n="adv_itg"/>
		<pattern-item n="cond"/>		
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>	
			<b/>			
            <lu>
				<get-case-from pos="4">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="4" side="sl" part="persona"/>
				<clip pos="4" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="4">			
				<clip pos="4" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="4" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>					
          </out>
        </action>
      </rule>	
	  
	  
   <!--REGLA verbos_ast 4b:
	nun sabes cómo te cantaría > no sabes cómo te habría cantado
	-->
    <rule>
      <pattern>
        <pattern-item n="nun"/>
		<pattern-item n="saber"/>	
		<pattern-item n="adv_itg"/>
		<pattern-item n="encpro"/>
		<pattern-item n="cond"/>		
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>	
			<b/>
			<lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>	
			<b/>
            <lu>
				<get-case-from pos="5">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="5" side="sl" part="persona"/>
				<clip pos="5" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="5">			
				<clip pos="5" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="5" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>					
          </out>
        </action>
      </rule>	

	  
	  
   <!--REGLA verbos_ast 4c:
	nun sabes cómo te la cantaría > no sabes cómo te la habría cantado
	-->
    <rule>
      <pattern>
        <pattern-item n="nun"/>
		<pattern-item n="saber"/>	
		<pattern-item n="adv_itg"/>
		<pattern-item n="encpro"/>
		<pattern-item n="encpro"/>		
		<pattern-item n="cond"/>		
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>	
			<b/>
			<lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>	
			<b/>
			<lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>	
			<b/>			
            <lu>
				<get-case-from pos="6">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="6" side="sl" part="persona"/>
				<clip pos="6" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="6">			
				<clip pos="6" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="6" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>					
          </out>
        </action>
      </rule>	
	  

	  
	
   <!--REGLA verbos_ast 4d:
	nun sé cómo nun cantaría > no sé cómo no habría cantado
	-->
    <rule>
      <pattern>
        <pattern-item n="nun"/>
		<pattern-item n="saber"/>	
		<pattern-item n="adv_itg"/>
		<pattern-item n="nun"/>
		<pattern-item n="cond"/>		
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>			 
			<b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>	
			<b/>	
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>			 
			<b/>			
            <lu>
				<get-case-from pos="5">
					<lit v="haber"/>
				</get-case-from>
				<lit-tag v="vbhaver.cni"/>
				<clip pos="5" side="sl" part="persona"/>
				<clip pos="5" side="sl" part="nbr"/>	  
            </lu>
			<b/>
            <lu>
				<get-case-from pos="5">			
				<clip pos="5" side="tl" part="lem"/>
				</get-case-from>				
				<clip pos="5" side="sl" part="a_verb"/>
				<lit-tag v="pp.m.sg"/>  
            </lu>					
          </out>
        </action>
      </rule>	

	  
   <!--REGRA EGV04b: ir/vir + inf = ir/venir + a + inf 
	    voi comer -> comeré
	-->
    <rule>
      <pattern>
        <pattern-item n="dir"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <out>
            <lu>
				<get-case-from pos="1">
					<clip pos="2" side="tl" part="lem"/>
				</get-case-from>
				<clip pos="2" side="sl" part="a_verb"/>
				<lit-tag v="fti"/>
				<clip pos="1" side="sl" part="persona"/>
				<clip pos="1" side="sl" part="nbr"/>	  
            </lu>
          </out>
        </action>
      </rule>	


   <!--REGRA EGV04c: ir/vir + inf = ir/venir + a + inf 
        voi comelo -> lo comeré
        va sentase -> se sentará
	-->
    <rule>
      <pattern>
        <pattern-item n="dir"/>
        <pattern-item n="inf"/>
         <pattern-item n="prnenc"/>		
      </pattern>
      <action>
          <choose>
            <when>
              <test>
                  <equal>
                    <clip pos="3" side="sl" part="a_prnenc"/>
                    <lit-tag v="prn.enc.ref"/>
                  </equal>	
			  </test>
			 <out>
			 	<lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro.ref"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>				
				</lu>	
				<b/>
				<lu>
					<get-case-from pos="2">
						<clip pos="2" side="tl" part="lem"/>
					</get-case-from>
					<clip pos="2" side="sl" part="a_verb"/>
					<lit-tag v="fti"/>
					<clip pos="1" side="sl" part="persona"/>
					<clip pos="1" side="sl" part="nbr"/>	  
				</lu>
			  </out>
			</when>
			<otherwise>
			 <out>
			 	<lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>				
				</lu>	
				<b/>
				<lu>
					<get-case-from pos="2">
						<clip pos="2" side="tl" part="lem"/>
					</get-case-from>
					<clip pos="2" side="sl" part="a_verb"/>
					<lit-tag v="fti"/>
					<clip pos="1" side="sl" part="persona"/>
					<clip pos="1" side="sl" part="nbr"/>	  
				</lu>
			  </out>
            </otherwise>
          </choose>     
        </action>			
      </rule>	
	  

    <!--REGRA EGV04: ir/vir + inf = ir/venir + a + inf 
	    diba comer -> iba a comer
	-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
	      <get-case-from pos="2">
              <lit v="a"/>
	      </get-case-from>
	      <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </out>
        </action>
      </rule>
 
      
      <!--REGRA EGV05: ir/vir + inf + enc 
		voi comelo -> lo voy a comer	  
	  -->
      <!--está por facer con ir/vir en pmp-->
      <rule>
        <pattern>
          <pattern-item n="verbir"/>
		  <pattern-item n="inf"/>
          <pattern-item n="prnenc"/>
        </pattern>
        <action>
          <choose>
            <when>
              <test>
                <and>
                  <equal>
                    <clip pos="3" side="sl" part="a_prnenc"/>
                    <lit-tag v="prn.enc.ref"/>
                  </equal>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="imp"/>
                    </equal></not>
                </and>
              </test>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro.ref"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                  <clip pos="1" side="tl" part="whole"/>
                </get-case-from>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
            </lu> 
              </out>
            </when>
            <when>
              <test>
                <and>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="imp"/>
                    </equal></not> 
                </and>
              </test>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="whole"/>
                  </get-case-from>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
              </out>
            </when>
          <otherwise>
              <out>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="sl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="persona"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <clip pos="3" side="tl" part="a_prnenc"/>
                    <clip pos="3" side="tl" part="persona"/>
                    <clip pos="3" side="tl" part="gen"/>
                    <clip pos="3" side="tl" part="nbr"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
              </mlu>
              </out>  
            </otherwise>
          </choose>     
        </action>
    </rule>
    
    
    <!--REGRA EGV06: ir/vir + enc + inf -->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="sl" part="a_prnenc"/>
                <lit-tag v="prn.enc.ref"/>
              </equal>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro.ref"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu> 
          </out>
        </when>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="sl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_prnenc"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    
    <!--REGRA EGV07: ir/vir + inf + enc +enc 
		voi contátelo -> te lo voy a contar
	-->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="4" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="persona"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="sl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <clip pos="3" side="tl" part="a_prnenc"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <clip pos="4" side="tl" part="a_prnenc"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    
    <!--REGRA EGV08: ir/vir + enc + enc + inf  -->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="sl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_prnenc"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <clip pos="3" side="tl" part="a_prnenc"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    

<!-- 
regla PERIF09 en + ger -> tras + inf 
en comiendo -> tras comer
-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>

        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
             <lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              
            </lu>
        </out>
     </action>
</rule>


<!-- 
regla PERIF09b en + ger +enc -> tras + inf 
En comiendolo -> Tras comerlo
En comiéndolu -> Tras comerle
En debiéndo-yos -> Tras deberles
-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>

       <choose>

            <when>
            <test>
		<and>

		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="nt"/>
                </equal>
              </and>
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		  <get-case-from pos="2">
		<lit v="lo"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="nt"/>
            <clip pos="3" side="tl" part="nbr"/>
	    </lu>
           </mlu>
         
            </out>
          </when>

          <when>
            <test>

		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	     
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<get-case-from pos="1">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="3" side="tl" part="nbr"/>
	   
	     </lu>
           </mlu>
         
            </out>
          </when>

        <otherwise>
        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
           </mlu>
        </out>
       </otherwise>
     </choose>
     </action>
</rule>

	
<!-- 
regla PERIF09b en + ger +enc + enc -> tras + inf 
En comiéndoselo -> Tras comérselo
En comiéndotelu -> Tras comértele
En debiéndose-yos -> Tras debérseles

-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
	<pattern-item n="prnenc"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>

       <choose>

            <when>
            <test>
		<and>

		 <equal>
                 <clip pos="4" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="nt"/>
                </equal>
              </and>
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
              <lu> 
               <clip pos="3" side="tl" part="whole"/>
              </lu>
             <lu>
		  <get-case-from pos="2">
		<lit v="lo"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="4" side="tl" part="persona"/>
             <lit-tag v="nt"/>
            <clip pos="4" side="tl" part="nbr"/>
	    </lu>
           </mlu>
         
            </out>
          </when>

        <when>
            <test>

		 <equal>
                 <clip pos="4" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	     
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
             <lu>
		<get-case-from pos="2">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="4" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="4" side="tl" part="nbr"/>
	   
	     </lu>
           </mlu>
         
            </out>
          </when>

        <otherwise>
        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
               <lu>
		<clip pos="4" side="tl" part="whole"/>
	     </lu>
           </mlu>
        </out>
       </otherwise>
     </choose>
     </action>
</rule>

  

<!-- 
regla PERIF10 (bon, bonu,mal,malu) + de + inf -> (fácil,difícil) +de+ inf 
Bono d'estudiar -> Fácil de estudiar

-->  
 
 <rule>
      <pattern>
        <pattern-item n="bueno_malo"/>
        <pattern-item n="de"/>		
        <pattern-item n="inf"/>
      </pattern>
      <action>
	<choose>
	   <when>
            <test>
                  <or>
				<equal caseless="yes">
				     <clip pos="1" side="sl" part="lem"/>
					 <lit v="bonu"/>
				</equal>
				<equal caseless="yes">
				     <clip pos="1" side="sl" part="lem"/>
					 <lit v="bono"/>
				</equal>
                   </or>
			</test>	  
			<out>
			  <lu>
				 <get-case-from pos="1">
				<lit v="fácil"/>
				</get-case-from>
				<lit-tag v="adj.mf.sg"/>
				
			  </lu>
			  <b pos="1"/>
			  <lu>
				<clip pos="2" side="tl" part="whole"/>
			  </lu>
			<b pos="1"/>
			  <lu>
				<clip pos="3" side="tl" part="whole"/>
			  </lu>			  
			</out>
		</when>
	   <otherwise> 
			<out>
			  <lu>
				<get-case-from pos="1">
				<lit v="difícil"/>
				</get-case-from>
		
				<lit-tag v="adj.mf.sg"/>
				
			  </lu>
			  <b pos="1"/>
			  <lu>
				<clip pos="2" side="tl" part="whole"/>
			  </lu>
			<b pos="1"/>
			  <lu>
				<clip pos="3" side="tl" part="whole"/>
			  </lu>			  
			</out>
		</otherwise>	
	  </choose>
      </action>
    </rule>



<!-- 
regla EGV11 dir + sustantivo_temporal -> facer + sustantivo_temporal
-->  

<rule>
      <pattern>
	<pattern-item n="verb_temp"/>
        <pattern-item n="sustantivo_temporal"/>
      </pattern>
      <action>
	  <choose>
	   <when>
        <test>
		  <and>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="persona"/>
				  <lit-tag v="p3"/>
			  </equal>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="nbr"/>
				  <lit-tag v="sg"/>
			  </equal>		
		  </and>
        </test>
        <out>
            <lu>
		       <get-case-from pos="1">
			    <lit v="hacer"/>
			</get-case-from>
			<lit-tag v="vblex"/>
			<clip pos="1" side="tl" part="temps"/>
               		<clip pos="1" side="tl" part="persona"/>
               		<clip pos="1" side="tl" part="nbr"/>
			</lu>
             <b/>
            <lu>
		      <clip pos="2" side="tl" part="whole"/> 
			</lu> 		    
        </out>
       </when>
      </choose>
     </action>
    </rule>	

<!-- VA dos años -> HACE dos años -->
<!-- 
regla EGV12 hacer + det/num/adj + sustantivo_temporal -> DIR + det/num/adj + sustantivo_temporal
-->  

<rule>
      <pattern>
	<pattern-item n="verb_temp"/>
	<pattern-item n="adj_det_num_nom"/>
        <pattern-item n="sustantivo_temporal"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>	
	  <choose>
	   <when>
        <test>
		  <and>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="persona"/>
				  <lit-tag v="p3"/>
			  </equal>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="nbr"/>
				  <lit-tag v="sg"/>
			  </equal>		
		  </and>
        </test>
        <out>
            <lu>
		       <get-case-from pos="1">
			    <lit v="hacer"/>
			</get-case-from>
			<lit-tag v="vblex"/>
			<clip pos="1" side="tl" part="temps"/>
               		<clip pos="1" side="tl" part="persona"/>
               		<clip pos="1" side="tl" part="nbr"/>
			</lu>
            <b/>
            <lu>
		      <clip pos="2" side="tl" part="whole"/> 
			</lu>
             <b/>
            <lu>
		      <clip pos="3" side="tl" part="whole"/> 
			</lu> 		    
        </out>
       </when>
      </choose>
     </action>
    </rule>		
	
    
    
  
    <!-- 
     regla EGV13 tener + de + inf -> deber + inf
    tienen de cantar -> deben cantar

    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
	    </pattern>
	    <action>
		   
		 <out>
		 	<lu>
			    <get-case-from pos="1">
			    <lit v="deber"/>
		            </get-case-from>
			    <clip pos="1" side="tl" part="a_verb"/>
			    <clip pos="1" side="tl" part="temps"/>
			    <clip pos="1" side="tl" part="persona"/>
			    <clip pos="1" side="tl" part="nbr"/>
		         </lu>
			 <b/>
			
			 <lu>
			     <clip pos="3" side="tl" part="whole"/> 
			  </lu>
        </out>
	    </action>
    </rule>		

    
    <!-- 
	 regla EGV14 tener + de + inf + enc -> deber + inf + enc
    teníen de comeles -> debían comerlas
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="deber"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    
			    <mlu>
			     <lu>
				    <clip pos="3" side="tl" part="whole"/> 
			    </lu>
			    <lu>
				    <clip pos="4" side="tl" part="whole"/> 
			    </lu>
		    	   </mlu>
		    </out>
	    </action>
    </rule>	
    
    
    
    <!-- 
	 regla EGV15 tener + de + inf + enc + enc-> deber + inf + enc + enc
    tendríen de coméseles -> deberían comérselas
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
		    <pattern-item n="prnenc"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="deber"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    
			    <mlu>
				    <lu>
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu>
				    <lu>
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu>
				    <lu>
					    <clip pos="5" side="tl" part="whole"/> 
				    </lu>
			    </mlu>
		    </out>
	    </action>
    </rule>		
	
	
	
<!-- 
regla EGV16 "LO" + ADJ nt + QUE relativo + verbo + determinante + sustantivo -> ADJ género concuerda con nombre
Lo blanco que taba la nieve -> Lo blanca que estaba la nieve
Lo blanco que taba la nieve -> Lo blanca que estaba la nieve
-->  

    
    <rule>
      <pattern>
        <pattern-item n="detnt"/>
        <pattern-item n="adjnt"/>
        <pattern-item n="que"/>
        <pattern-item n="verb"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>

        <out>
            <lu>
			<clip pos="1" side="tl" part="whole"/> 
			</lu>
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_adjec"/>
				<clip pos="6" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
          	<b pos="2"/>
            <lu>
				<clip pos="3" side="tl" part="whole"/> 
			</lu>
          	<b pos="3"/>
			<lu>
				<clip pos="4" side="tl" part="lem"/>
				<clip pos="4" side="tl" part="a_verb"/>
				<clip pos="4" side="tl" part="temps"/>
				<clip pos="4" side="tl" part="persona"/>
				<clip pos="4" side="tl" part="nbr"/>
			</lu>
			<b pos="4"/>
			<lu>
				<clip pos="5" side="tl" part="lem"/>
				<clip pos="5" side="tl" part="a_det"/>
				<clip pos="5" side="tl" part="gen"/>
				<clip pos="5" side="tl" part="nbr"/>
			</lu>
			<b pos="5"/>
			<lu>
					<clip pos="6" side="tl" part="lem"/>
					<clip pos="6" side="tl" part="a_nom"/>
					<clip pos="6" side="tl" part="gen"/>
					<clip pos="6" side="tl" part="nbr"/>
			</lu>
        </out>
  
      </action>

    </rule>	
	
	
    <!-- 
	 regla EGV17 tener + de + inf -> deber + inf
    tienen de cantar -> deben cantar
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="venir"/>
		    <pattern-item n="de"/>			
		    <pattern-item n="inf"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="acabar"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/> 
			    </lu>			  
			    <b/>
			    <lu>
				    <clip pos="3" side="tl" part="whole"/> 
			    </lu>
		    </out>
	    </action>
    </rule>		
    
    <!-- 
	 regla EGV18 entamar + a + inf -> empezar + a + inf
    
    entamen a comer -> empiezan a comer
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="entamar"/>
		    <pattern-item n="a"/>
		    <pattern-item n="inf"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="empezar"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    <lu>
				        <clip pos="2" side="tl" part="whole"/> 
			    
			    </lu>
			    <b/>
			    
			    <lu>
				    <clip pos="3" side="tl" part="whole"/> 
			    </lu>
		    </out>
	    </action>
    </rule>		
    
    
  
    <!--
	REGRA EGN1: contracción(prep+def)+posesivo
		al mio andamiu -> a mi andamio
	-->
	
    <rule>
      <pattern>
        <pattern-item n="prep_tou"/>
        <pattern-item n="def"/>
        <pattern-item n="pos"/> 
        <pattern-item n="adj_nom"/> 		
      </pattern>
	    <action>
		  <choose>
			<when>
				<test>
					<equal>
						<clip pos="3" side="sl" part="lem"/>
						<lit v="mio"/>
					</equal>
				</test>
				<out> 	  
				  <lu>
					<clip pos="1" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<lit v="mi"/>
					<lit-tag v="det.pos.mf"/>	
					<clip pos="3" side="tl" part="nbr"/> 
				  </lu>
				  <b/>
				  <lu>
					<clip pos="4" side="tl" part="whole"/>  
				  </lu>						  
				</out>
			</when>
			<when>
				<test>
					<equal>
						<clip pos="3" side="sl" part="lem"/>
						<lit v="to"/>
					</equal>
				</test>
				<out> 	  
				  <lu>
					<clip pos="1" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<lit v="tu"/>
					<lit-tag v="det.pos.mf"/>
					<clip pos="3" side="tl" part="nbr"/> 					
				  </lu>
				  <b/>
				  <lu>
					<clip pos="4" side="tl" part="whole"/>  
				  </lu>						  
				</out>
			</when>		
			<when>
				<test>
					<equal>
						<clip pos="3" side="sl" part="lem"/>
						<lit v="tos"/>
					</equal>
				</test>
				<out> 	  
				  <lu>
					<clip pos="1" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<lit v="tu"/>
					<lit-tag v="det.pos.mf.pl"/>
				  </lu>
				  <b/>
				  <lu>
					<clip pos="4" side="tl" part="whole"/>  
				  </lu>						  
				</out>
			</when>					
			<when>
				<test>
					<equal>
						<clip pos="3" side="sl" part="lem"/>
						<lit v="so"/>
					</equal>
				</test>
				<out> 	  
				  <lu>
					<clip pos="1" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<lit v="su"/>
					<lit-tag v="det.pos.mf"/>
					<clip pos="3" side="tl" part="nbr"/> 					
				  </lu>
				  <b/>
				  <lu>
					<clip pos="4" side="tl" part="whole"/>  
				  </lu>				  
				</out>
			</when>		
			<otherwise>
				<out> 	  
				  <lu>
					<clip pos="1" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>  
				  </lu>
				  <b/>
				  <lu>
					<clip pos="4" side="tl" part="whole"/>  
				  </lu>				  
				</out>			
			</otherwise>			
		  </choose>
      </action>
    </rule>


 

  
  <rule> <!-- REGRA: reset variables-->
    <pattern>
      <pattern-item n="sent"/>
    </pattern>
    <action>
      <let>
        <var n="numero"/>
        <lit-tag v="sg"/>
      </let>
      <let>
        <var n="genero"/>
        <lit-tag v="m"/>
      </let>
      <out>
        <lu>
          <clip pos="1" side="tl" part="whole"/>
        </lu>
      </out>
    </action>
    </rule>
    
  </section-rules>
</transfer>
